{"file_contents":{"client/src/pages/statistics.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { BarChart3, TrendingUp, Users, Eye } from \"lucide-react\";\n\nexport default function Statistics() {\n  const { user } = useAuth();\n\n  const { data: stats, isLoading } = useQuery<{\n    totalCampaigns: number;\n    activeCampaigns: number;\n    totalTemplates: number;\n    totalDownloads: number;\n  }>({\n    queryKey: [\"/api/statistics\", user?.id],\n    enabled: !!user,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Statistics</h1>\n          <p className=\"text-gray-600 mt-2\">Track your campaign performance</p>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[...Array(6)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-6\">\n                <div className=\"h-20 bg-gray-200 rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const mockEngagementData = [\n    { platform: \"Email\", views: 1250, clicks: 89 },\n    { platform: \"Social Media\", views: 2340, clicks: 156 },\n    { platform: \"Direct Link\", views: 890, clicks: 67 },\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Statistics</h1>\n        <p className=\"text-gray-600 mt-2\">Track your campaign performance and analytics</p>\n      </div>\n\n      {/* Overview Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Campaigns</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalCampaigns || 0}</p>\n                <p className=\"text-xs text-green-600 mt-1\">↗ +12% this month</p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                <BarChart3 className=\"w-6 h-6 text-blue-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Views</p>\n                <p className=\"text-2xl font-bold text-gray-900\">4,580</p>\n                <p className=\"text-xs text-green-600 mt-1\">↗ +24% this month</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n                <Eye className=\"w-6 h-6 text-green-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Engagement Rate</p>\n                <p className=\"text-2xl font-bold text-gray-900\">6.8%</p>\n                <p className=\"text-xs text-green-600 mt-1\">↗ +3.2% this month</p>\n              </div>\n              <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\">\n                <TrendingUp className=\"w-6 h-6 text-purple-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Downloads</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalDownloads || 0}</p>\n                <p className=\"text-xs text-green-600 mt-1\">↗ +18% this month</p>\n              </div>\n              <div className=\"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center\">\n                <Users className=\"w-6 h-6 text-amber-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Engagement Breakdown */}\n      <Card>\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Engagement by Platform</h2>\n        </div>\n        <CardContent className=\"p-6\">\n          <div className=\"space-y-4\">\n            {mockEngagementData.map((item, index) => (\n              <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">{item.platform}</h3>\n                  <p className=\"text-sm text-gray-600\">{item.views} views • {item.clicks} clicks</p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"font-semibold text-gray-900\">\n                    {((item.clicks / item.views) * 100).toFixed(1)}%\n                  </p>\n                  <p className=\"text-xs text-gray-500\">CTR</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Coming Soon */}\n      <Card>\n        <CardContent className=\"p-8 text-center\">\n          <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <BarChart3 className=\"w-8 h-8 text-primary\" />\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Advanced Analytics</h3>\n          <p className=\"text-gray-600\">\n            Detailed analytics including conversion tracking, A/B testing results, and more insights coming soon.\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5943},"client/src/pages/product-management.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Package, Upload, Edit, Trash2, Plus } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Product, InsertProduct } from \"@shared/schema\";\n\nexport default function ProductManagement() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [productForm, setProductForm] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    category: \"\",\n  });\n\n  const { data: products = [], isLoading } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n    enabled: !!user,\n  });\n\n  const createProductMutation = useMutation({\n    mutationFn: async (data: FormData) => {\n      const response = await fetch(\"/api/products\", {\n        method: \"POST\",\n        body: data,\n      });\n      if (!response.ok) throw new Error(\"Failed to create product\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\", user?.id] });\n      toast({ title: \"Product created successfully!\" });\n      resetForm();\n      setIsDialogOpen(false);\n    },\n    onError: () => {\n      toast({ title: \"Failed to create product\", variant: \"destructive\" });\n    },\n  });\n\n  const updateProductMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: number; data: FormData }) => {\n      const response = await fetch(`/api/products/${id}`, {\n        method: \"PATCH\",\n        body: data,\n      });\n      if (!response.ok) throw new Error(\"Failed to update product\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\", user?.id] });\n      toast({ title: \"Product updated successfully!\" });\n      resetForm();\n      setIsDialogOpen(false);\n    },\n    onError: () => {\n      toast({ title: \"Failed to update product\", variant: \"destructive\" });\n    },\n  });\n\n  const deleteProductMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const response = await fetch(`/api/products/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete product\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\", user?.id] });\n      toast({ title: \"Product deleted successfully!\" });\n    },\n    onError: () => {\n      toast({ title: \"Failed to delete product\", variant: \"destructive\" });\n    },\n  });\n\n  const resetForm = () => {\n    setProductForm({ name: \"\", description: \"\", price: \"\", category: \"\" });\n    setSelectedFile(null);\n    setEditingProduct(null);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const formData = new FormData();\n    formData.append(\"name\", productForm.name);\n    formData.append(\"description\", productForm.description);\n    formData.append(\"originalPrice\", productForm.price);\n    formData.append(\"category\", productForm.category);\n    \n    if (selectedFile) {\n      formData.append(\"image\", selectedFile);\n    }\n\n    if (editingProduct) {\n      updateProductMutation.mutate({ id: editingProduct.id, data: formData });\n    } else {\n      createProductMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (product: Product) => {\n    setEditingProduct(product);\n    setProductForm({\n      name: product.name,\n      description: product.description || \"\",\n      price: product.originalPrice.toString(),\n      category: product.category,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file && file.type.startsWith(\"image/\")) {\n      setSelectedFile(file);\n    } else {\n      toast({ title: \"Please select a valid image file\", variant: \"destructive\" });\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case \"Electronics\": return \"bg-blue-100 text-blue-800\";\n      case \"Fashion\": return \"bg-purple-100 text-purple-800\";\n      case \"Home & Garden\": return \"bg-green-100 text-green-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Product Management</h1>\n          <p className=\"text-gray-600\">Add and manage your product catalog</p>\n        </div>\n        \n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button onClick={resetForm}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Product\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingProduct ? \"Edit Product\" : \"Add New Product\"}\n              </DialogTitle>\n            </DialogHeader>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"name\">Product Name</Label>\n                  <Input\n                    id=\"name\"\n                    value={productForm.name}\n                    onChange={(e) => setProductForm({ ...productForm, name: e.target.value })}\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"price\">Price ($)</Label>\n                  <Input\n                    id=\"price\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={productForm.price}\n                    onChange={(e) => setProductForm({ ...productForm, price: e.target.value })}\n                    required\n                  />\n                </div>\n              </div>\n              \n              <div>\n                <Label htmlFor=\"category\">Category</Label>\n                <Select\n                  value={productForm.category}\n                  onValueChange={(value) => setProductForm({ ...productForm, category: value })}\n                  required\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a category\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Electronics\">Electronics</SelectItem>\n                    <SelectItem value=\"Fashion\">Fashion</SelectItem>\n                    <SelectItem value=\"Home & Garden\">Home & Garden</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div>\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  value={productForm.description}\n                  onChange={(e) => setProductForm({ ...productForm, description: e.target.value })}\n                  rows={3}\n                />\n              </div>\n              \n              <div>\n                <Label htmlFor=\"image\">Product Image (JPG format)</Label>\n                <div className=\"mt-2\">\n                  <Input\n                    id=\"image\"\n                    type=\"file\"\n                    accept=\"image/jpeg,image/jpg\"\n                    onChange={handleFileChange}\n                    className=\"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n                  />\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsDialogOpen(false)}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createProductMutation.isPending || updateProductMutation.isPending}\n                >\n                  {editingProduct ? \"Update Product\" : \"Create Product\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[...Array(6)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-4\">\n                <div className=\"h-40 bg-gray-200 rounded mb-4\"></div>\n                <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded mb-4\"></div>\n                <div className=\"h-6 bg-gray-200 rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : products.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Package className=\"w-12 h-12 text-gray-400 mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No products yet</h3>\n            <p className=\"text-gray-600 mb-4\">Add your first product to get started.</p>\n            <Button onClick={() => setIsDialogOpen(true)}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Product\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {products.map((product: Product) => (\n            <Card key={product.id} className=\"overflow-hidden\">\n              <CardContent className=\"p-0\">\n                <div className=\"h-40 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center\">\n                  {product.imageUrl ? (\n                    <img\n                      src={product.imageUrl}\n                      alt={product.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <Package className=\"w-16 h-16 text-gray-400\" />\n                  )}\n                </div>\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <h3 className=\"font-semibold text-gray-900 text-lg\">{product.name}</h3>\n                    <Badge className={getCategoryColor(product.category)}>\n                      {product.category}\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\n                    {product.description || \"No description\"}\n                  </p>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-xl font-bold text-blue-600\">\n                      ${product.originalPrice}\n                    </span>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleEdit(product)}\n                      >\n                        <Edit className=\"w-4 h-4\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => deleteProductMutation.mutate(product.id)}\n                        disabled={deleteProductMutation.isPending}\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":12936},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/products/selected-products.tsx":{"content":"import { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Trash2 } from \"lucide-react\";\nimport type { Product, CampaignProduct } from \"@shared/schema\";\n\ninterface SelectedProductsProps {\n  products: (CampaignProduct & { product: Product })[];\n  onProductUpdate: (id: number, updates: Partial<CampaignProduct>) => void;\n  onProductRemove: (id: number) => void;\n}\n\nexport default function SelectedProducts({\n  products,\n  onProductUpdate,\n  onProductRemove,\n}: SelectedProductsProps) {\n  const calculateNewPrice = (\n    originalPrice: number,\n    discountPercent: number\n  ) => {\n    return originalPrice * (1 - discountPercent / 100);\n  };\n\n  const handleQuantityChange = (id: number, quantity: number) => {\n    onProductUpdate(id, { quantity });\n  };\n\n  const handleDiscountChange = (\n    id: number,\n    discountPercent: number,\n    originalPrice: number\n  ) => {\n    const newPrice = calculateNewPrice(originalPrice, discountPercent);\n    onProductUpdate(id, { discountPercent, newPrice });\n  };\n\n  const handleDisplayNameChange = (id: number, value: string) => {\n    // Store an override name for rendering in the editor\n    onProductUpdate(id, { ...(null as any), displayName: value } as any);\n  };\n\n  const handleOriginalPriceOverride = (\n    id: number,\n    value: string,\n    fallback: number\n  ) => {\n    const price = value === \"\" ? fallback : parseFloat(value);\n    if (!isNaN(price) && price >= 0) {\n      onProductUpdate(id, {\n        ...(null as any),\n        originalPriceOverride: price,\n      } as any);\n    }\n  };\n\n  const handleNewPriceChange = (\n    id: number,\n    value: string,\n    originalPrice: number\n  ) => {\n    const price = value === \"\" ? 0 : parseFloat(value);\n    if (!isNaN(price) && price >= 0) {\n      // When user sets new price manually, also refresh discount percent accordingly\n      const discountPercent =\n        originalPrice > 0\n          ? Math.max(0, Math.min(100, (1 - price / originalPrice) * 100))\n          : 0;\n      onProductUpdate(id, { newPrice: price, discountPercent });\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col relative z-10\">\n      <div className=\"p-6 border-b border-gray-200 bg-white\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">\n          Selected Products\n        </h2>\n      </div>\n\n      <div className=\"flex-1 p-6 space-y-4 overflow-y-auto\">\n        {products.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-500\">No products selected</p>\n            <p className=\"text-sm text-gray-400 mt-1\">\n              Add products from the search panel\n            </p>\n          </div>\n        ) : (\n          products.map((item) => (\n            <div\n              key={item.id}\n              className=\"bg-white rounded-xl p-4 border border-gray-200 relative z-20 shadow-sm\"\n            >\n              <div className=\"flex items-center space-x-4 mb-3\">\n                {item.product.imageUrl && (\n                  <img\n                    src={item.product.imageUrl}\n                    alt={item.product.name}\n                    className=\"w-12 h-12 rounded-lg object-cover\"\n                  />\n                )}\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-gray-900\">\n                    {item.product.name}\n                  </h4>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"text-red-500 hover:text-red-600 p-0 h-auto\"\n                    onClick={() => onProductRemove(item.id)}\n                  >\n                    <Trash2 className=\"w-4 h-4 mr-1\" />\n                    Remove\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                {/* Editable display name */}\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Product Name:</span>\n                  <Input\n                    type=\"text\"\n                    value={(item as any).displayName ?? item.product.name}\n                    onChange={(e) =>\n                      handleDisplayNameChange(item.id, e.target.value)\n                    }\n                    className=\"w-44 text-sm\"\n                  />\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Original Price:</span>\n                  <Input\n                    type=\"number\"\n                    value={\n                      (item as any).originalPriceOverride ??\n                      item.product.originalPrice\n                    }\n                    onChange={(e) =>\n                      handleOriginalPriceOverride(\n                        item.id,\n                        e.target.value,\n                        item.product.originalPrice\n                      )\n                    }\n                    className=\"w-24 text-center\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Quantity:</span>\n                  <Input\n                    type=\"number\"\n                    value={item.quantity}\n                    onChange={(e) =>\n                      handleQuantityChange(\n                        item.id,\n                        parseInt(e.target.value) || 1\n                      )\n                    }\n                    className=\"w-16 text-center\"\n                    min=\"1\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Discount:</span>\n                  <div className=\"flex items-center space-x-1\">\n                    <Input\n                      type=\"number\"\n                      value={item.discountPercent}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        const discount = value === \"\" ? 0 : parseFloat(value);\n                        if (\n                          !isNaN(discount) &&\n                          discount >= 0 &&\n                          discount <= 100\n                        ) {\n                          handleDiscountChange(\n                            item.id,\n                            discount,\n                            (item as any).originalPriceOverride ??\n                              item.product.originalPrice\n                          );\n                        }\n                      }}\n                      className=\"w-16 text-center\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"0.1\"\n                    />\n                    <span className=\"text-sm\">%</span>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between border-t pt-2\">\n                  <span className=\"text-sm font-semibold text-gray-900\">\n                    New Price:\n                  </span>\n                  <Input\n                    type=\"number\"\n                    value={item.newPrice}\n                    onChange={(e) =>\n                      handleNewPriceChange(\n                        item.id,\n                        e.target.value,\n                        (item as any).originalPriceOverride ??\n                          item.product.originalPrice\n                      )\n                    }\n                    className=\"w-24 text-center font-bold\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":7900},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport path from \"path\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // This route is handled by routes.ts registerRoutes function\n\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  const listenOptions: any = {\n    port,\n    host: \"0.0.0.0\",\n  };\n\n  // reusePort is not supported on Windows; enable only when supported\n  if (process.platform !== \"win32\") {\n    listenOptions.reusePort = true;\n  }\n\n  server.listen(listenOptions, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2330},"server/storage.ts":{"content":"import { \n  users, campaigns, products, campaignProducts, templates, logos,\n  type User, type InsertUser, type Campaign, type InsertCampaign,\n  type Product, type InsertProduct, type CampaignProduct, type InsertCampaignProduct,\n  type Template, type InsertTemplate, type Logo, type InsertLogo\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // Users\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  // Campaigns\n  getCampaigns(userId: number): Promise<Campaign[]>;\n  getCampaign(id: number): Promise<Campaign | undefined>;\n  createCampaign(campaign: InsertCampaign): Promise<Campaign>;\n  updateCampaign(id: number, campaign: Partial<Campaign>): Promise<Campaign | undefined>;\n  deleteCampaign(id: number): Promise<boolean>;\n\n  // Products\n  getProducts(search?: string, category?: string): Promise<Product[]>;\n  getProduct(id: number): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: number, updates: Partial<Product>): Promise<Product | undefined>;\n  deleteProduct(id: number): Promise<boolean>;\n\n  // Campaign Products\n  getCampaignProducts(campaignId: number): Promise<CampaignProduct[]>;\n  addProductToCampaign(campaignProduct: InsertCampaignProduct): Promise<CampaignProduct>;\n  updateCampaignProduct(id: number, updates: Partial<CampaignProduct>): Promise<CampaignProduct | undefined>;\n  removeCampaignProduct(id: number): Promise<boolean>;\n\n  // Templates\n  getTemplates(userId: number): Promise<Template[]>;\n  getTemplate(id: number): Promise<Template | undefined>;\n  createTemplate(template: InsertTemplate): Promise<Template>;\n  deleteTemplate(id: number): Promise<boolean>;\n\n  // Logos\n  getLogos(userId: number): Promise<Logo[]>;\n  getActiveLogo(userId: number): Promise<Logo | undefined>;\n  createLogo(logo: InsertLogo): Promise<Logo>;\n  setActiveLogo(userId: number, logoId: number): Promise<boolean>;\n  deleteLogo(id: number): Promise<boolean>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<number, User>;\n  private campaigns: Map<number, Campaign>;\n  private products: Map<number, Product>;\n  private campaignProducts: Map<number, CampaignProduct>;\n  private templates: Map<number, Template>;\n  private logos: Map<number, Logo>;\n  private currentUserId: number;\n  private currentCampaignId: number;\n  private currentProductId: number;\n  private currentCampaignProductId: number;\n  private currentTemplateId: number;\n  private currentLogoId: number;\n\n  constructor() {\n    this.users = new Map();\n    this.campaigns = new Map();\n    this.products = new Map();\n    this.campaignProducts = new Map();\n    this.templates = new Map();\n    this.logos = new Map();\n    this.currentUserId = 1;\n    this.currentCampaignId = 1;\n    this.currentProductId = 1;\n    this.currentCampaignProductId = 1;\n    this.currentTemplateId = 1;\n    this.currentLogoId = 1;\n\n    this.seedData();\n  }\n\n  private seedData() {\n    // Create test user\n    const testUser: User = {\n      id: 1,\n      username: \"test\",\n      password: \"test\",\n      name: \"Sarah Johnson\"\n    };\n    this.users.set(1, testUser);\n\n    // Seed products\n    const sampleProducts: Product[] = [\n      {\n        id: 1,\n        name: \"Premium Wireless Headphones\",\n        category: \"Electronics\",\n        originalPrice: 199.99,\n        imageUrl: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300\",\n        description: \"High-quality wireless headphones with noise cancellation\"\n      },\n      {\n        id: 2,\n        name: \"Latest Smartphone Pro\",\n        category: \"Electronics\",\n        originalPrice: 899.99,\n        imageUrl: \"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300\",\n        description: \"Latest flagship smartphone with advanced features\"\n      },\n      {\n        id: 3,\n        name: \"Gaming Laptop\",\n        category: \"Electronics\",\n        originalPrice: 1299.99,\n        imageUrl: \"https://images.unsplash.com/photo-1603302576837-37561b2e2302?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300\",\n        description: \"High-performance gaming laptop\"\n      },\n      {\n        id: 4,\n        name: \"Smart Watch\",\n        category: \"Electronics\",\n        originalPrice: 299.99,\n        imageUrl: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300\",\n        description: \"Feature-rich smartwatch with health tracking\"\n      }\n    ];\n\n    sampleProducts.forEach(product => {\n      this.products.set(product.id, product);\n    });\n    this.currentProductId = 5;\n\n    // Seed campaigns\n    const sampleCampaigns: Campaign[] = [\n      {\n        id: 1,\n        name: \"Summer Electronics Sale\",\n        description: \"Electronics & Gadgets\",\n        status: \"active\",\n        userId: 1,\n        templateId: 1,\n        companyName: \"TechStore Pro\",\n        validUntil: \"Dec 31, 2023\",\n        createdAt: new Date(\"2023-12-15\")\n      },\n      {\n        id: 2,\n        name: \"Holiday Fashion Collection\",\n        description: \"Fashion & Apparel\",\n        status: \"draft\",\n        userId: 1,\n        templateId: null,\n        companyName: \"StyleHub\",\n        validUntil: \"Jan 15, 2024\",\n        createdAt: new Date(\"2023-12-12\")\n      },\n      {\n        id: 3,\n        name: \"Black Friday Deals\",\n        description: \"Mixed Categories\",\n        status: \"completed\",\n        userId: 1,\n        templateId: 1,\n        companyName: \"MegaDeals\",\n        validUntil: \"Nov 30, 2023\",\n        createdAt: new Date(\"2023-11-20\")\n      }\n    ];\n\n    sampleCampaigns.forEach(campaign => {\n      this.campaigns.set(campaign.id, campaign);\n    });\n    this.currentCampaignId = 4;\n  }\n\n  // Users\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(user => user.username === username);\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = this.currentUserId++;\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n\n  // Campaigns\n  async getCampaigns(userId: number): Promise<Campaign[]> {\n    return Array.from(this.campaigns.values()).filter(campaign => campaign.userId === userId);\n  }\n\n  async getCampaign(id: number): Promise<Campaign | undefined> {\n    return this.campaigns.get(id);\n  }\n\n  async createCampaign(insertCampaign: InsertCampaign): Promise<Campaign> {\n    const id = this.currentCampaignId++;\n    const campaign: Campaign = { \n      id,\n      name: insertCampaign.name,\n      description: insertCampaign.description || null,\n      status: insertCampaign.status || \"draft\",\n      userId: insertCampaign.userId,\n      templateId: insertCampaign.templateId || null,\n      companyName: insertCampaign.companyName || null,\n      validUntil: insertCampaign.validUntil || null,\n      createdAt: new Date() \n    };\n    this.campaigns.set(id, campaign);\n    return campaign;\n  }\n\n  async updateCampaign(id: number, updates: Partial<Campaign>): Promise<Campaign | undefined> {\n    const campaign = this.campaigns.get(id);\n    if (!campaign) return undefined;\n\n    const updatedCampaign = { ...campaign, ...updates };\n    this.campaigns.set(id, updatedCampaign);\n    return updatedCampaign;\n  }\n\n  async deleteCampaign(id: number): Promise<boolean> {\n    return this.campaigns.delete(id);\n  }\n\n  // Products\n  async getProducts(search?: string, category?: string): Promise<Product[]> {\n    let products = Array.from(this.products.values());\n\n    if (search) {\n      products = products.filter(product => \n        product.name.toLowerCase().includes(search.toLowerCase()) ||\n        product.description?.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    if (category && category !== \"all\") {\n      products = products.filter(product => product.category === category);\n    }\n\n    return products;\n  }\n\n  async getProduct(id: number): Promise<Product | undefined> {\n    return this.products.get(id);\n  }\n\n  async createProduct(insertProduct: InsertProduct): Promise<Product> {\n    const id = this.currentProductId++;\n    const product: Product = { \n      id,\n      name: insertProduct.name,\n      category: insertProduct.category,\n      originalPrice: insertProduct.originalPrice,\n      description: insertProduct.description || null,\n      imageUrl: insertProduct.imageUrl || null\n    };\n    this.products.set(id, product);\n    return product;\n  }\n\n  async updateProduct(id: number, updates: Partial<Product>): Promise<Product | undefined> {\n    const product = this.products.get(id);\n    if (!product) return undefined;\n\n    const updatedProduct = { ...product, ...updates };\n    this.products.set(id, updatedProduct);\n    return updatedProduct;\n  }\n\n  async deleteProduct(id: number): Promise<boolean> {\n    return this.products.delete(id);\n  }\n\n  // Campaign Products\n  async getCampaignProducts(campaignId: number): Promise<CampaignProduct[]> {\n    return Array.from(this.campaignProducts.values()).filter(cp => cp.campaignId === campaignId);\n  }\n\n  async addProductToCampaign(insertCampaignProduct: InsertCampaignProduct): Promise<CampaignProduct> {\n    const id = this.currentCampaignProductId++;\n    const campaignProduct: CampaignProduct = { \n      id,\n      campaignId: insertCampaignProduct.campaignId,\n      productId: insertCampaignProduct.productId,\n      quantity: insertCampaignProduct.quantity || 1,\n      discountPercent: insertCampaignProduct.discountPercent || 0,\n      newPrice: insertCampaignProduct.newPrice,\n      positionX: insertCampaignProduct.positionX || null,\n      positionY: insertCampaignProduct.positionY || null\n    };\n    this.campaignProducts.set(id, campaignProduct);\n    return campaignProduct;\n  }\n\n  async updateCampaignProduct(id: number, updates: Partial<CampaignProduct>): Promise<CampaignProduct | undefined> {\n    const campaignProduct = this.campaignProducts.get(id);\n    if (!campaignProduct) return undefined;\n\n    const updated = { ...campaignProduct, ...updates };\n    this.campaignProducts.set(id, updated);\n    return updated;\n  }\n\n  async removeCampaignProduct(id: number): Promise<boolean> {\n    return this.campaignProducts.delete(id);\n  }\n\n  // Templates\n  async getTemplates(userId: number): Promise<Template[]> {\n    return Array.from(this.templates.values()).filter(template => template.userId === userId);\n  }\n\n  async getTemplate(id: number): Promise<Template | undefined> {\n    return this.templates.get(id);\n  }\n\n  async createTemplate(insertTemplate: InsertTemplate): Promise<Template> {\n    const id = this.currentTemplateId++;\n    const template: Template = { \n      id,\n      name: insertTemplate.name,\n      description: insertTemplate.description || null,\n      filePath: insertTemplate.filePath,\n      thumbnailPath: insertTemplate.thumbnailPath || null,\n      userId: insertTemplate.userId,\n      createdAt: new Date() \n    };\n    this.templates.set(id, template);\n    return template;\n  }\n\n  async deleteTemplate(id: number): Promise<boolean> {\n    return this.templates.delete(id);\n  }\n\n  // Logos\n  async getLogos(userId: number): Promise<Logo[]> {\n    return Array.from(this.logos.values()).filter(logo => logo.userId === userId);\n  }\n\n  async getActiveLogo(userId: number): Promise<Logo | undefined> {\n    return Array.from(this.logos.values()).find(logo => logo.userId === userId && logo.isActive);\n  }\n\n  async createLogo(insertLogo: InsertLogo): Promise<Logo> {\n    const id = this.currentLogoId++;\n    const logo: Logo = { \n      id,\n      name: insertLogo.name,\n      filePath: insertLogo.filePath,\n      isActive: insertLogo.isActive || false,\n      userId: insertLogo.userId,\n      createdAt: new Date() \n    };\n    this.logos.set(id, logo);\n    return logo;\n  }\n\n  async setActiveLogo(userId: number, logoId: number): Promise<boolean> {\n    // Set all logos for this user as inactive\n    const userLogos = Array.from(this.logos.values()).filter(logo => logo.userId === userId);\n    userLogos.forEach(logo => {\n      logo.isActive = false;\n      this.logos.set(logo.id, logo);\n    });\n\n    // Set the specified logo as active\n    const logo = this.logos.get(logoId);\n    if (logo && logo.userId === userId) {\n      logo.isActive = true;\n      this.logos.set(logoId, logo);\n      return true;\n    }\n    return false;\n  }\n\n  async deleteLogo(id: number): Promise<boolean> {\n    return this.logos.delete(id);\n  }\n}\n\nexport const storage = new MemStorage();","size_bytes":12630},"client/src/components/layout/dashboard-layout.tsx":{"content":"import { useState } from \"react\";\nimport { ReactNode } from \"react\";\nimport Sidebar from \"./sidebar\";\nimport TopBar from \"./topbar\";\n\ninterface DashboardLayoutProps {\n  children: ReactNode;\n}\n\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  const toggleSidebar = () => {\n    setSidebarCollapsed(!sidebarCollapsed);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <TopBar onToggleSidebar={toggleSidebar} />\n      <div className=\"flex\">\n        <Sidebar collapsed={sidebarCollapsed} />\n        <main className=\"flex-1 p-6 overflow-auto\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":725},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/pages/template-upload.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { CloudUpload, Edit, Trash2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Template } from \"@shared/schema\";\n\nexport default function TemplateUpload() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [uploading, setUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [templateName, setTemplateName] = useState(\"\");\n  const [templateDescription, setTemplateDescription] = useState(\"\");\n\n  const { data: templates = [], isLoading } = useQuery<Template[]>({\n    queryKey: [\"/api/templates\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/templates?userId=${user.id}`);\n      if (!response.ok) throw new Error('Failed to fetch templates');\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: async (formData: FormData) => {\n      const response = await fetch(\"/api/templates\", {\n        method: \"POST\",\n        body: formData,\n      });\n      if (!response.ok) {\n        throw new Error(\"Upload failed\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/templates\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/templates\", user?.id] });\n      toast({\n        title: \"Template uploaded successfully\",\n        description: \"Your template is now available for use in campaigns.\",\n      });\n      setSelectedFile(null);\n      setTemplateName(\"\");\n      setTemplateDescription(\"\");\n    },\n    onError: () => {\n      toast({\n        title: \"Upload failed\",\n        description: \"There was an error uploading your template.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (templateId: number) => {\n      const response = await fetch(`/api/templates/${templateId}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) {\n        throw new Error(\"Delete failed\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/templates\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/templates\", user?.id] });\n      toast({\n        title: \"Template deleted successfully\",\n        description: \"The template has been removed.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Delete failed\",\n        description: \"There was an error deleting the template.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      if (!templateName) {\n        setTemplateName(file.name.replace(/\\.[^/.]+$/, \"\"));\n      }\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile || !templateName || !user) return;\n\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"name\", templateName);\n    formData.append(\"description\", templateDescription);\n    formData.append(\"userId\", user.id.toString());\n\n    uploadMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Template Upload</h1>\n        <p className=\"text-gray-600 mt-2\">Upload and manage your brochure templates</p>\n      </div>\n\n      {/* Upload Area */}\n      <Card>\n        <CardContent className=\"p-8\">\n          <div className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"template-file\">Template File</Label>\n              <div className=\"mt-2 border-2 border-dashed border-gray-300 rounded-xl p-12 text-center hover:border-primary/50 transition-colors\">\n                <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <CloudUpload className=\"w-8 h-8 text-primary\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Upload Template Files\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Drag and drop your template files here, or click to browse\n                </p>\n                <input\n                  id=\"template-file\"\n                  type=\"file\"\n                  accept=\".pdf,.ai,.psd,.svg,.jpg,.jpeg,.png,.gif,.webp\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n                <Button\n                  variant=\"outline\"\n                  onClick={() => document.getElementById(\"template-file\")?.click()}\n                >\n                  Choose Files\n                </Button>\n                <p className=\"text-xs text-gray-500 mt-3\">\n                  Supports: PDF, AI, PSD, SVG, JPG, JPEG, PNG, GIF, WEBP (Max 50MB)\n                </p>\n              </div>\n              {selectedFile && (\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  Selected: {selectedFile.name}\n                </p>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"template-name\">Template Name</Label>\n                <Input\n                  id=\"template-name\"\n                  value={templateName}\n                  onChange={(e) => setTemplateName(e.target.value)}\n                  placeholder=\"Enter template name\"\n                  className=\"mt-2\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"template-description\">Description</Label>\n                <Textarea\n                  id=\"template-description\"\n                  value={templateDescription}\n                  onChange={(e) => setTemplateDescription(e.target.value)}\n                  placeholder=\"Describe your template\"\n                  className=\"mt-2\"\n                />\n              </div>\n            </div>\n\n            <Button\n              onClick={handleUpload}\n              disabled={!selectedFile || !templateName || uploadMutation.isPending}\n              className=\"w-full\"\n            >\n              {uploadMutation.isPending ? \"Uploading...\" : \"Upload Template\"}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Templates Grid */}\n      <Card>\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Uploaded Templates</h2>\n        </div>\n        <CardContent className=\"p-6\">\n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(3)].map((_, i) => (\n                <div key={i} className=\"border border-gray-200 rounded-xl p-4 animate-pulse\">\n                  <div className=\"w-full h-40 bg-gray-200 rounded-lg mb-4\"></div>\n                  <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          ) : templates.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <CloudUpload className=\"w-8 h-8 text-gray-400\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No templates uploaded</h3>\n              <p className=\"text-gray-600\">Upload your first template to get started.</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {templates.map((template: Template) => (\n                <div key={template.id} className=\"border border-gray-200 rounded-xl p-4\">\n                  <div className=\"w-full h-40 bg-gray-100 rounded-lg mb-4 overflow-hidden\">\n                    {template.filePath ? (\n                      <img \n                        src={`/uploads/${template.filePath}`}\n                        alt={template.name}\n                        className=\"w-full h-full object-cover\"\n                        onError={(e) => {\n                          (e.target as HTMLImageElement).src = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDIwMCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTYwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04NS41IDYwTDk1IDQ5LjVMMTA0LjUgNjBMOTUgNzBMODUuNSA2MFoiIGZpbGw9IiM5Q0E4QjQiLz4KPHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCA4MCAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjQiIGZpbGw9IiNFNUU3RUIiLz4KPHJlY3QgeT0iOCIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQiIGZpbGw9IiNFNUU3RUIiLz4KPC9zdmc+Cjwvc3ZnPgo=\";\n                        }}\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gray-100 text-gray-400\">\n                        <CloudUpload className=\"w-8 h-8\" />\n                      </div>\n                    )}\n                  </div>\n                  <h3 className=\"font-semibold text-gray-900 mb-2\">{template.name}</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    {template.description || \"No description\"}\n                  </p>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-xs text-gray-500\">\n                      {template.createdAt ? new Date(template.createdAt).toLocaleDateString() : \"\"}\n                    </span>\n                    <div className=\"flex space-x-2\">\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        className=\"text-primary\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          toast({\n                            title: \"Edit feature\",\n                            description: \"Edit functionality coming soon!\",\n                          });\n                        }}\n                        data-testid={`button-edit-template-${template.id}`}\n                      >\n                        <Edit className=\"w-4 h-4 mr-1\" />\n                        Edit\n                      </Button>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        className=\"text-red-600\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          if (window.confirm(`Are you sure you want to delete \"${template.name}\"?`)) {\n                            deleteMutation.mutate(template.id);\n                          }\n                        }}\n                        disabled={deleteMutation.isPending}\n                        data-testid={`button-delete-template-${template.id}`}\n                      >\n                        <Trash2 className=\"w-4 h-4 mr-1\" />\n                        {deleteMutation.isPending ? \"Deleting...\" : \"Delete\"}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":11973},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/pages/logo-upload.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Building, Upload, Trash2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Logo } from \"@shared/schema\";\n\nexport default function LogoUpload() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [logoName, setLogoName] = useState(\"\");\n\n  const { data: logos = [], isLoading } = useQuery<Logo[]>({\n    queryKey: [\"/api/logos\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/logos?userId=${user.id}`);\n      if (!response.ok) throw new Error('Failed to fetch logos');\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const { data: activeLogo } = useQuery<Logo | null>({\n    queryKey: [\"/api/logos/active\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n      const response = await fetch(`/api/logos/active?userId=${user.id}`);\n      if (!response.ok) return null;\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: async (formData: FormData) => {\n      const response = await fetch(\"/api/logos\", {\n        method: \"POST\",\n        body: formData,\n      });\n      if (!response.ok) {\n        throw new Error(\"Upload failed\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos\", user?.id] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos/active\", user?.id] });\n      toast({\n        title: \"Logo uploaded successfully\",\n        description: \"Your logo is now available for use in brochures.\",\n      });\n      setSelectedFile(null);\n      setLogoName(\"\");\n    },\n    onError: () => {\n      toast({\n        title: \"Upload failed\",\n        description: \"There was an error uploading your logo.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const activateMutation = useMutation({\n    mutationFn: async (logoId: number) => {\n      const response = await fetch(`/api/logos/${logoId}/activate`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ userId: user?.id }),\n      });\n      if (!response.ok) {\n        throw new Error(\"Activation failed\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos\", user?.id] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos/active\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/logos/active\", user?.id] });\n      toast({\n        title: \"Logo activated\",\n        description: \"This logo is now your active company logo.\",\n      });\n    },\n  });\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      if (!logoName) {\n        setLogoName(file.name.replace(/\\.[^/.]+$/, \"\"));\n      }\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile || !logoName || !user) return;\n\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"name\", logoName);\n    formData.append(\"userId\", user.id.toString());\n\n    uploadMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Company Logo Upload</h1>\n        <p className=\"text-gray-600 mt-2\">Upload and manage your company logos</p>\n      </div>\n\n      {/* Upload Area */}\n      <Card>\n        <CardContent className=\"p-8\">\n          <div className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"logo-file\">Logo File</Label>\n              <div className=\"mt-2 border-2 border-dashed border-gray-300 rounded-xl p-12 text-center hover:border-primary/50 transition-colors\">\n                <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Upload className=\"w-8 h-8 text-primary\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Upload Company Logos\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Drag and drop your logo files here, or click to browse\n                </p>\n                <input\n                  id=\"logo-file\"\n                  type=\"file\"\n                  accept=\".png,.jpg,.jpeg,.svg\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n                <Button\n                  variant=\"outline\"\n                  onClick={() => document.getElementById(\"logo-file\")?.click()}\n                >\n                  Choose Files\n                </Button>\n                <p className=\"text-xs text-gray-500 mt-3\">\n                  Supports: PNG, JPG, SVG (Max 10MB, Transparent backgrounds recommended)\n                </p>\n              </div>\n              {selectedFile && (\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  Selected: {selectedFile.name}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"logo-name\">Logo Name</Label>\n              <Input\n                id=\"logo-name\"\n                value={logoName}\n                onChange={(e) => setLogoName(e.target.value)}\n                placeholder=\"Enter logo name\"\n                className=\"mt-2\"\n              />\n            </div>\n\n            <Button\n              onClick={handleUpload}\n              disabled={!selectedFile || !logoName || uploadMutation.isPending}\n              className=\"w-full\"\n            >\n              {uploadMutation.isPending ? \"Uploading...\" : \"Upload Logo\"}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n\n\n      {/* Logo Library */}\n      <Card>\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Logo Library</h2>\n        </div>\n        <CardContent className=\"p-6\">\n          {isLoading ? (\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"border border-gray-200 rounded-xl p-4 animate-pulse\">\n                  <div className=\"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-3\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          ) : logos.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Building className=\"w-8 h-8 text-gray-400\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No logos uploaded</h3>\n              <p className=\"text-gray-600\">Upload your first logo to get started.</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              {logos.map((logo: Logo) => (\n                <div\n                  key={logo.id}\n                  className=\"border border-gray-200 rounded-xl p-4 text-center hover:shadow-md transition-shadow\"\n                >\n                  <div className=\"w-16 h-16 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-3 overflow-hidden\">\n                    <img \n                      src={logo.filePath ? `/uploads/${logo.filePath.split('/').pop()}` : ''}\n                      alt={logo.name}\n                      className=\"w-full h-full object-contain\"\n                      onError={(e) => {\n                        (e.target as HTMLImageElement).style.display = 'none';\n                        (e.target as HTMLImageElement).nextElementSibling?.removeAttribute('style');\n                      }}\n                    />\n                    <Building className=\"w-8 h-8 text-primary\" style={{display: 'none'}} />\n                  </div>\n                  <p className=\"text-xs text-gray-600 mb-2\">{logo.name}</p>\n                  <div className=\"flex justify-center space-x-1\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"text-primary text-xs p-1\"\n                      onClick={() => activateMutation.mutate(logo.id)}\n                      disabled={activateMutation.isPending}\n                    >\n                      {logo.isActive ? \"Active\" : \"Use\"}\n                    </Button>\n                    <span className=\"text-gray-300\">•</span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"text-red-600 text-xs p-1\"\n                    >\n                      <Trash2 className=\"w-3 h-3\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9713},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { type User } from \"@shared/schema\";\nimport { getStoredUser, storeUser, clearStoredUser } from \"@/lib/auth\";\n\ninterface AuthContextType {\n  user: Omit<User, 'password'> | null;\n  setUser: (user: Omit<User, 'password'> | null) => void;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<Omit<User, 'password'> | null>(null);\n\n  useEffect(() => {\n    const storedUser = getStoredUser();\n    if (storedUser) {\n      setUser(storedUser);\n    }\n  }, []);\n\n  const updateUser = (newUser: Omit<User, 'password'> | null) => {\n    setUser(newUser);\n    if (newUser) {\n      storeUser(newUser);\n    } else {\n      clearStoredUser();\n    }\n  };\n\n  const logout = () => {\n    updateUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, setUser: updateUser, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":1264},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/pages/dashboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { BarChart3, Users, Calendar, Download, Plus, Edit, Trash2, Eye, FileText, Image, Megaphone, PlayCircle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Link, useLocation } from \"wouter\";\nimport type { Campaign } from \"@shared/schema\";\n\nexport default function Dashboard() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, setLocation] = useLocation();\n  const [selectedCampaign, setSelectedCampaign] = useState<Campaign | null>(null);\n  const [isPreviewOpen, setIsPreviewOpen] = useState(false);\n  const [isDownloadOpen, setIsDownloadOpen] = useState(false);\n  const [isDeleteOpen, setIsDeleteOpen] = useState(false);\n  const [campaignToDelete, setCampaignToDelete] = useState<Campaign | null>(null);\n\n  const { data: campaigns = [], isLoading: campaignsLoading, error: campaignsError } = useQuery<Campaign[]>({\n    queryKey: [\"/api/campaigns\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/campaigns?userId=${user.id}`);\n      if (!response.ok) {\n        console.error('Failed to fetch campaigns:', response.status);\n        return [];\n      }\n      const data = await response.json();\n      return Array.isArray(data) ? data : [];\n    },\n    enabled: !!user?.id,\n    retry: 3,\n    retryDelay: 1000,\n  });\n\n  const { data: stats } = useQuery<{\n    totalCampaigns: number;\n    activeCampaigns: number;\n    totalTemplates: number;\n    totalDownloads: number;\n  }>({\n    queryKey: [\"/api/statistics\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/statistics?userId=${user?.id}`);\n      if (!response.ok) throw new Error('Failed to fetch statistics');\n      return response.json();\n    },\n    enabled: !!user,\n  });\n\n  // Delete campaign mutation\n  const deleteCampaignMutation = useMutation({\n    mutationFn: async (campaignId: number) => {\n      const response = await fetch(`/api/campaigns/${campaignId}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete campaign\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/campaigns\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/statistics\"] });\n      toast({\n        title: \"Campaign deleted\",\n        description: \"The campaign has been successfully deleted.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Delete failed\",\n        description: \"Could not delete the campaign. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Handler functions\n  const handleEditCampaign = (campaign: Campaign) => {\n    setLocation(`/create-campaign?campaignId=${campaign.id}`);\n  };\n\n  const handleDownloadCampaign = (campaign: Campaign) => {\n    setSelectedCampaign(campaign);\n    setIsDownloadOpen(true);\n  };\n\n  const handleDeleteCampaign = (campaign: Campaign) => {\n    if (window.confirm(`Are you sure you want to delete \"${campaign.name}\"?`)) {\n      deleteCampaignMutation.mutate(campaign.id);\n    }\n  };\n\n  const handleDownload = async (format: string) => {\n    if (!selectedCampaign) return;\n\n    setIsDownloadOpen(false);\n    \n    // Navigate to the campaign editor where they can download\n    setLocation(`/create-campaign?campaignId=${selectedCampaign.id}`);\n    \n    setTimeout(() => {\n      toast({\n        title: \"Campaign loaded\",\n        description: `Click the Download button in the editor to save as ${format.toUpperCase()}.`,\n      });\n    }, 500);\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return <Badge className=\"bg-green-100 text-green-800\">Active</Badge>;\n      case \"draft\":\n        return <Badge variant=\"secondary\">Draft</Badge>;\n      case \"completed\":\n        return <Badge className=\"bg-yellow-100 text-yellow-800\">Completed</Badge>;\n      default:\n        return <Badge variant=\"outline\">{status}</Badge>;\n    }\n  };\n\n  const formatDate = (date: string | Date) => {\n    return new Date(date).toLocaleDateString();\n  };\n\n  const handleDeleteConfirm = () => {\n    if (campaignToDelete) {\n      deleteCampaignMutation.mutate(campaignToDelete.id);\n    }\n  };\n\n  if (campaignsLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\n            <p className=\"text-gray-600 mt-2\">Manage your marketing campaigns and brochures</p>\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {[...Array(4)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-6\">\n                <div className=\"h-12 bg-gray-200 rounded\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\n          <p className=\"text-gray-600 mt-2\">Manage your marketing campaigns and brochures</p>\n        </div>\n        <Link href=\"/create-campaign\">\n          <Button className=\"flex items-center space-x-2\">\n            <Plus className=\"w-4 h-4\" />\n            <span>Create Campaign</span>\n          </Button>\n        </Link>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Campaigns</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalCampaigns || 0}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                <Megaphone className=\"w-6 h-6 text-blue-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Active Campaigns</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.activeCampaigns || 0}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n                <PlayCircle className=\"w-6 h-6 text-green-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Templates</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalTemplates || 0}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\">\n                <FileText className=\"w-6 h-6 text-purple-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Downloads</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalDownloads || 0}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center\">\n                <Download className=\"w-6 h-6 text-amber-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Campaigns List */}\n      <Card>\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Recent Campaigns</h2>\n        </div>\n        {campaigns.length === 0 ? (\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Megaphone className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No campaigns yet</h3>\n            <p className=\"text-gray-600 mb-4\">Get started by creating your first marketing campaign.</p>\n            <Link href=\"/create-campaign\">\n              <Button>Create Campaign</Button>\n            </Link>\n          </CardContent>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                    Campaign Name\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                    Company\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                    Created\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {Array.isArray(campaigns) && campaigns.map((campaign: Campaign) => (\n                  <tr key={campaign.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\n                          <FileText className=\"w-5 h-5 text-blue-600\" />\n                        </div>\n                        <div>\n                          <p className=\"font-semibold text-gray-900\">{campaign.name}</p>\n                          <p className=\"text-sm text-gray-500\">{campaign.description}</p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {getStatusBadge(campaign.status)}\n                    </td>\n                    <td className=\"px-6 py-4 text-gray-900\">{campaign.companyName || \"N/A\"}</td>\n                    <td className=\"px-6 py-4 text-gray-600\">\n                      {campaign.createdAt ? formatDate(campaign.createdAt) : \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEditCampaign(campaign)}\n                        >\n                          <Edit className=\"w-4 h-4 mr-1\" />\n                          Edit\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-green-600\"\n                          onClick={() => handleDownloadCampaign(campaign)}\n                        >\n                          <Download className=\"w-4 h-4 mr-1\" />\n                          Download\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-red-600\"\n                          onClick={() => handleDeleteCampaign(campaign)}\n                          disabled={deleteCampaignMutation.isPending}\n                        >\n                          <Trash2 className=\"w-4 h-4 mr-1\" />\n                          Delete\n                        </Button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </Card>\n\n      {/* Download Dialog */}\n      <Dialog open={isDownloadOpen} onOpenChange={setIsDownloadOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Download Campaign</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Download \"{selectedCampaign?.name}\" in your preferred format:\n            </p>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <Button variant=\"outline\" onClick={() => handleDownload(\"pdf\")}>\n                <FileText className=\"w-4 h-4 mr-2\" />\n                PDF\n              </Button>\n              <Button variant=\"outline\" onClick={() => handleDownload(\"png\")}>\n                <Image className=\"w-4 h-4 mr-2\" />\n                PNG\n              </Button>\n              <Button variant=\"outline\" onClick={() => handleDownload(\"jpeg\")}>\n                <Image className=\"w-4 h-4 mr-2\" />\n                JPEG\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":14255},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/lib/auth.ts":{"content":"import { apiRequest } from \"./queryClient\";\nimport { type LoginCredentials, type User } from \"@shared/schema\";\n\ninterface AuthResponse {\n  user: Omit<User, 'password'>;\n}\n\nexport async function login(credentials: LoginCredentials): Promise<AuthResponse> {\n  const response = await apiRequest(\"POST\", \"/api/auth/login\", credentials);\n  return await response.json();\n}\n\nexport function getStoredUser(): Omit<User, 'password'> | null {\n  const stored = localStorage.getItem(\"user\");\n  return stored ? JSON.parse(stored) : null;\n}\n\nexport function storeUser(user: Omit<User, 'password'>): void {\n  localStorage.setItem(\"user\", JSON.stringify(user));\n}\n\nexport function clearStoredUser(): void {\n  localStorage.removeItem(\"user\");\n}\n","size_bytes":728},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/products/product-search.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Search } from \"lucide-react\";\nimport type { Product } from \"@shared/schema\";\n\ninterface ProductSearchProps {\n  onProductSelect: (product: Product) => void;\n}\n\nexport default function ProductSearch({ onProductSelect }: ProductSearchProps) {\n  const { user } = useAuth();\n  const [search, setSearch] = useState(\"\");\n  const [category, setCategory] = useState(\"all\");\n\n  const { data: products = [], isLoading } = useQuery<Product[]>({\n    queryKey: [\"/api/products\", { search: search || undefined, category: category !== \"all\" ? category : undefined }],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (search) params.append('search', search);\n      if (category !== 'all') params.append('category', category);\n      \n      const response = await fetch(`/api/products?${params.toString()}`);\n      if (!response.ok) throw new Error('Failed to fetch products');\n      return response.json();\n    },\n    enabled: !!user,\n  });\n\n  const categories = [\n    { value: \"all\", label: \"All Products\" },\n    { value: \"Electronics\", label: \"Electronics\" },\n    { value: \"Fashion\", label: \"Fashion\" },\n    { value: \"Home & Garden\", label: \"Home & Garden\" },\n  ];\n\n  return (\n    <div className=\"h-full flex flex-col relative z-10\">\n      <div className=\"p-6 border-b border-gray-200 bg-white\">\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Add Products</h2>\n        \n        {/* Search Bar */}\n        <div className=\"relative mb-4\">\n          <Input\n            type=\"text\"\n            placeholder=\"Search products...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"pl-10\"\n          />\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n        </div>\n\n        {/* Product Categories */}\n        <div className=\"space-y-2\">\n          {categories.map(cat => (\n            <button\n              key={cat.value}\n              onClick={() => setCategory(cat.value)}\n              className={`w-full text-left px-3 py-2 rounded-lg font-medium transition-colors ${\n                category === cat.value\n                  ? \"bg-primary/10 text-primary\"\n                  : \"hover:bg-gray-50\"\n              }`}\n            >\n              {cat.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Product List */}\n      <div className=\"flex-1 p-6 space-y-4 overflow-y-auto\">\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"border border-gray-200 rounded-xl p-4 animate-pulse\">\n                <div className=\"flex space-x-4\">\n                  <div className=\"w-16 h-16 bg-gray-200 rounded-lg\"></div>\n                  <div className=\"flex-1\">\n                    <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded mb-2 w-1/2\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-1/3\"></div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : products.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-500\">No products found</p>\n          </div>\n        ) : (\n          products.map((product: Product) => (\n            <div\n              key={product.id}\n              className=\"border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow cursor-pointer relative z-20 bg-white\"\n            >\n              <div className=\"flex space-x-4\">\n                {product.imageUrl && (\n                  <img\n                    src={product.imageUrl}\n                    alt={product.name}\n                    className=\"w-16 h-16 rounded-lg object-cover\"\n                  />\n                )}\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-gray-900\">{product.name}</h4>\n                  <p className=\"text-sm text-gray-600\">{product.category}</p>\n                  <div className=\"flex items-center justify-between mt-2\">\n                    <span className=\"text-lg font-bold text-gray-900\">\n                      ${product.originalPrice.toFixed(2)}\n                    </span>\n                    <Button\n                      size=\"sm\"\n                      onClick={() => onProductSelect(product)}\n                    >\n                      Add\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4869},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport express from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport {\n  loginSchema,\n  insertCampaignSchema,\n  insertCampaignProductSchema,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\n\n// Configure multer for file uploads - use persistent directory\nconst uploadDir = path.join(process.cwd(), \"uploads\");\nif (!fs.existsSync(uploadDir)) {\n  fs.mkdirSync(uploadDir, { recursive: true });\n}\n\n// Create public/assets directory for persistent storage\nconst publicAssetsDir = path.join(process.cwd(), \"public\", \"assets\");\nif (!fs.existsSync(publicAssetsDir)) {\n  fs.mkdirSync(publicAssetsDir, { recursive: true });\n}\n\n// JSON files for persistent metadata\nconst productsJsonPath = path.join(publicAssetsDir, \"products.json\");\nconst logosJsonPath = path.join(publicAssetsDir, \"logos.json\");\nconst templatesJsonPath = path.join(publicAssetsDir, \"templates.json\");\n\nasync function ensureJson(filePath: string) {\n  try {\n    await fs.promises.access(filePath, fs.constants.F_OK);\n  } catch {\n    await fs.promises.writeFile(filePath, JSON.stringify([], null, 2), \"utf-8\");\n  }\n}\n\nasync function readJsonArray<T = any>(filePath: string): Promise<T[]> {\n  await ensureJson(filePath);\n  const data = await fs.promises.readFile(filePath, \"utf-8\");\n  try {\n    const parsed = JSON.parse(data);\n    return Array.isArray(parsed) ? parsed : [];\n  } catch {\n    return [];\n  }\n}\n\nasync function writeJsonArray(filePath: string, arr: any[]): Promise<void> {\n  await fs.promises.writeFile(filePath, JSON.stringify(arr, null, 2), \"utf-8\");\n}\n\nfunction nextId(items: { id?: number }[]): number {\n  const maxId = items.reduce(\n    (m, it) => (typeof it.id === \"number\" && it.id! > m ? it.id! : m),\n    0\n  );\n  return maxId + 1;\n}\n\nconst upload = multer({\n  dest: uploadDir,\n  limits: {\n    fileSize: 50 * 1024 * 1024, // 50MB limit\n  },\n});\n\n// Helper function to sanitize filename\nfunction sanitizeFilename(name: string): string {\n  return name\n    .replace(/[^a-z0-9]/gi, \"_\")\n    .toLowerCase()\n    .substring(0, 50);\n}\n\n// Helper function to copy file to public/assets with custom name\nasync function copyToPublicAssets(\n  sourcePath: string,\n  customName: string,\n  originalExtension: string\n): Promise<string> {\n  const timestamp = Date.now();\n  const sanitizedName = sanitizeFilename(customName);\n  const fileName = `${sanitizedName}_${timestamp}${originalExtension}`;\n  const destPath = path.join(publicAssetsDir, fileName);\n\n  await fs.promises.copyFile(sourcePath, destPath);\n  return `/public/assets/${fileName}`;\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Serve uploaded files statically\n  app.use(\"/uploads\", express.static(uploadDir));\n  // Serve public assets statically\n  app.use(\"/public/assets\", express.static(publicAssetsDir));\n\n  // Authentication\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = loginSchema.parse(req.body);\n      const user = await storage.getUserByUsername(username);\n\n      if (!user || user.password !== password) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      res.json({\n        user: { id: user.id, username: user.username, name: user.name },\n      });\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid request data\" });\n    }\n  });\n\n  // Campaigns\n  app.get(\"/api/campaigns\", async (req, res) => {\n    try {\n      const userId = parseInt(req.query.userId as string);\n      if (!userId) {\n        return res.status(400).json({ message: \"User ID is required\" });\n      }\n\n      const campaigns = await storage.getCampaigns(userId);\n      res.json(campaigns);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch campaigns\" });\n    }\n  });\n\n  app.get(\"/api/campaigns/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const campaign = await storage.getCampaign(id);\n\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n\n      res.json(campaign);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch campaign\" });\n    }\n  });\n\n  app.post(\"/api/campaigns\", async (req, res) => {\n    try {\n      const campaignData = insertCampaignSchema.parse(req.body);\n      const campaign = await storage.createCampaign(campaignData);\n      res.status(201).json(campaign);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid campaign data\" });\n    }\n  });\n\n  app.put(\"/api/campaigns/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const updates = req.body;\n\n      const campaign = await storage.updateCampaign(id, updates);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n\n      res.json(campaign);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update campaign\" });\n    }\n  });\n\n  app.delete(\"/api/campaigns/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteCampaign(id);\n\n      if (!deleted) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n\n      res.json({ message: \"Campaign deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete campaign\" });\n    }\n  });\n\n  // Products\n  app.get(\"/api/products\", async (req, res) => {\n    try {\n      const search = (req.query.search as string) || \"\";\n      const category = (req.query.category as string) || \"\";\n\n      const jsonProducts = await readJsonArray<any>(productsJsonPath);\n      let products = jsonProducts;\n      if (search) {\n        const s = search.toLowerCase();\n        products = products.filter(\n          (p) =>\n            p.name?.toLowerCase().includes(s) ||\n            p.description?.toLowerCase().includes(s)\n        );\n      }\n      if (category && category !== \"all\") {\n        products = products.filter((p) => p.category === category);\n      }\n\n      // Fallback to in-memory storage if JSON empty\n      if (!products || products.length === 0) {\n        const fallback = await storage.getProducts(search, category);\n        return res.json(fallback);\n      }\n\n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  app.post(\"/api/products\", upload.single(\"image\"), async (req, res) => {\n    try {\n      const { name, description, originalPrice, category } = req.body;\n\n      let imageUrl = null;\n      let publicAssetsUrl = null;\n\n      if (req.file) {\n        imageUrl = `/uploads/${req.file.filename}`;\n        const fileExtension = path.extname(\n          req.file.originalname || req.file.filename\n        );\n        try {\n          publicAssetsUrl = await copyToPublicAssets(\n            req.file.path,\n            name || \"product\",\n            fileExtension\n          );\n        } catch (error) {\n          console.error(\n            \"Failed to copy product image to public/assets:\",\n            error\n          );\n        }\n      }\n\n      const productData = {\n        name,\n        description: description || null,\n        originalPrice: parseFloat(originalPrice),\n        category,\n        imageUrl: publicAssetsUrl || imageUrl,\n      };\n\n      // Create in-memory (for compatibility)\n      const product = await storage.createProduct(productData);\n\n      // Persist to JSON\n      const productsArr = await readJsonArray<any>(productsJsonPath);\n      const record = {\n        id: product?.id ?? nextId(productsArr),\n        ...productData,\n      };\n      productsArr.push(record);\n      await writeJsonArray(productsJsonPath, productsArr);\n\n      res.status(201).json(record);\n    } catch (error) {\n      console.error(\"Product creation error:\", error);\n      res.status(500).json({ message: \"Failed to create product\" });\n    }\n  });\n\n  app.patch(\"/api/products/:id\", upload.single(\"image\"), async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const { name, description, originalPrice, category } = req.body;\n\n      const updates: any = {};\n      if (name) updates.name = name;\n      if (description !== undefined) updates.description = description || null;\n      if (originalPrice) updates.originalPrice = parseFloat(originalPrice);\n      if (category) updates.category = category;\n\n      if (req.file) {\n        const productName =\n          name || (await storage.getProduct(id))?.name || \"product\";\n        const fileExtension = path.extname(\n          req.file.originalname || req.file.filename\n        );\n        try {\n          const publicAssetsUrl = await copyToPublicAssets(\n            req.file.path,\n            productName,\n            fileExtension\n          );\n          updates.imageUrl = publicAssetsUrl;\n        } catch (error) {\n          console.error(\n            \"Failed to copy product image to public/assets:\",\n            error\n          );\n          updates.imageUrl = `/uploads/${req.file.filename}`;\n        }\n      }\n\n      // Update in-memory\n      const product = await storage.updateProduct(id, updates);\n      if (!product) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n\n      // Update JSON\n      const productsArr = await readJsonArray<any>(productsJsonPath);\n      const idx = productsArr.findIndex((p) => p.id === id);\n      if (idx !== -1) {\n        productsArr[idx] = { ...productsArr[idx], ...updates };\n        await writeJsonArray(productsJsonPath, productsArr);\n      }\n\n      res.json(productsArr.find((p) => p.id === id) || product);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update product\" });\n    }\n  });\n\n  app.delete(\"/api/products/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteProduct(id);\n\n      const productsArr = await readJsonArray<any>(productsJsonPath);\n      const remaining = productsArr.filter((p) => p.id !== id);\n      await writeJsonArray(productsJsonPath, remaining);\n\n      if (!deleted && productsArr.length === remaining.length) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n\n      res.json({ message: \"Product deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete product\" });\n    }\n  });\n\n  // Campaign Products\n  app.get(\"/api/campaigns/:campaignId/products\", async (req, res) => {\n    try {\n      const campaignId = parseInt(req.params.campaignId);\n      const campaignProducts = await storage.getCampaignProducts(campaignId);\n\n      // Enrich with product details from JSON (persistent storage)\n      const allProducts = await readJsonArray<any>(productsJsonPath);\n      const enrichedProducts = campaignProducts.map((cp) => {\n        // Try to find product in JSON first, fallback to in-memory\n        let product = allProducts.find((p) => p.id === cp.productId);\n        if (!product) {\n          // Fallback to in-memory if not found in JSON\n          product = storage.products.get(cp.productId);\n        }\n        return { ...cp, product };\n      });\n\n      res.json(enrichedProducts);\n    } catch (error) {\n      console.error(\"Failed to fetch campaign products:\", error);\n      res.status(500).json({ message: \"Failed to fetch campaign products\" });\n    }\n  });\n\n  app.post(\"/api/campaigns/:campaignId/products\", async (req, res) => {\n    try {\n      const campaignId = parseInt(req.params.campaignId);\n      const productData = { ...req.body, campaignId };\n\n      const campaignProduct = await storage.addProductToCampaign(productData);\n      res.status(201).json(campaignProduct);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid product data\" });\n    }\n  });\n\n  app.put(\"/api/campaign-products/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const updates = req.body;\n\n      const campaignProduct = await storage.updateCampaignProduct(id, updates);\n      if (!campaignProduct) {\n        return res.status(404).json({ message: \"Campaign product not found\" });\n      }\n\n      res.json(campaignProduct);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update campaign product\" });\n    }\n  });\n\n  app.delete(\"/api/campaign-products/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.removeCampaignProduct(id);\n\n      if (!deleted) {\n        return res.status(404).json({ message: \"Campaign product not found\" });\n      }\n\n      res.json({ message: \"Product removed from campaign\" });\n    } catch (error) {\n      res\n        .status(500)\n        .json({ message: \"Failed to remove product from campaign\" });\n    }\n  });\n\n  // Templates\n  app.get(\"/api/templates\", async (req, res) => {\n    try {\n      const userId = parseInt(req.query.userId as string);\n      if (!userId) {\n        return res.status(400).json({ message: \"User ID is required\" });\n      }\n\n      const arr = await readJsonArray<any>(templatesJsonPath);\n      const templates = arr.filter(\n        (t) => t.userId === userId || t.userId == null\n      );\n      if (templates.length === 0) {\n        const fallback = await storage.getTemplates(userId);\n        return res.json(fallback);\n      }\n      res.json(templates);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch templates\" });\n    }\n  });\n\n  app.post(\"/api/templates\", upload.single(\"file\"), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No file uploaded\" });\n      }\n\n      const { name, description, userId } = req.body;\n      if (!name || !userId) {\n        return res\n          .status(400)\n          .json({ message: \"Name and user ID are required\" });\n      }\n\n      // Validate file type - allow image files and common design files for templates\n      const allowedMimes = [\n        \"image/jpeg\",\n        \"image/jpg\",\n        \"image/png\",\n        \"image/gif\",\n        \"image/webp\",\n        \"image/svg+xml\",\n        \"application/pdf\",\n        \"text/html\",\n        \"application/postscript\",\n      ];\n\n      if (!allowedMimes.includes(req.file.mimetype)) {\n        return res.status(400).json({\n          message:\n            \"Invalid file type. Please upload an image, PDF, or HTML file.\",\n        });\n      }\n\n      // Copy also to public/assets for persistence\n      const fileExtension = path.extname(\n        req.file.originalname || req.file.filename\n      );\n      try {\n        await copyToPublicAssets(req.file.path, name, fileExtension);\n      } catch (e) {\n        console.warn(\"Failed to duplicate template file to public/assets\", e);\n      }\n\n      // Create in-memory for compatibility\n      const template = await storage.createTemplate({\n        name,\n        description: description || null,\n        filePath: req.file.filename, // keep filename for existing UI which uses /uploads/\n        userId: parseInt(userId),\n      });\n\n      // Persist to JSON\n      const arr = await readJsonArray<any>(templatesJsonPath);\n      const record = {\n        id: template?.id ?? nextId(arr),\n        name,\n        description: description || null,\n        filePath: req.file.filename, // keep filename to work with /uploads/\n        userId: parseInt(userId),\n        createdAt: new Date().toISOString(),\n      };\n      arr.push(record);\n      await writeJsonArray(templatesJsonPath, arr);\n\n      res.status(201).json(record);\n    } catch (error) {\n      console.error(\"Template upload error:\", error);\n      res.status(500).json({ message: \"Failed to upload template\" });\n    }\n  });\n\n  app.delete(\"/api/templates/:id\", async (req, res) => {\n    try {\n      const templateId = parseInt(req.params.id);\n      if (!templateId) {\n        return res.status(400).json({ message: \"Template ID is required\" });\n      }\n\n      // Read templates from JSON\n      const arr = await readJsonArray<any>(templatesJsonPath);\n      const templateIndex = arr.findIndex((t) => t.id === templateId);\n\n      if (templateIndex === -1) {\n        return res.status(404).json({ message: \"Template not found\" });\n      }\n\n      const template = arr[templateIndex];\n\n      // Delete physical files if they exist\n      if (template.filePath) {\n        // Delete from uploads folder\n        const uploadsPath = path.join(\n          process.cwd(),\n          \"uploads\",\n          template.filePath\n        );\n        try {\n          await fs.unlink(uploadsPath);\n        } catch (e) {\n          console.warn(\"Could not delete file from uploads:\", e);\n        }\n\n        // Delete from public/assets folder\n        const publicAssetsPath = path.join(\n          process.cwd(),\n          \"public\",\n          \"assets\",\n          template.filePath\n        );\n        try {\n          await fs.unlink(publicAssetsPath);\n        } catch (e) {\n          console.warn(\"Could not delete file from public/assets:\", e);\n        }\n      }\n\n      // Remove from array and save\n      arr.splice(templateIndex, 1);\n      await writeJsonArray(templatesJsonPath, arr);\n\n      // Also remove from memory storage\n      await storage.deleteTemplate(templateId);\n\n      res.json({ message: \"Template deleted successfully\" });\n    } catch (error) {\n      console.error(\"Template delete error:\", error);\n      res.status(500).json({ message: \"Failed to delete template\" });\n    }\n  });\n\n  // Logos\n  app.get(\"/api/logos\", async (req, res) => {\n    try {\n      const userId = parseInt(req.query.userId as string);\n      if (!userId) {\n        return res.status(400).json({ message: \"User ID is required\" });\n      }\n\n      const logos = await readJsonArray<any>(logosJsonPath);\n      const filtered = logos.filter(\n        (l) => l.userId === userId || l.userId == null\n      );\n      if (filtered.length === 0) {\n        const fallback = await storage.getLogos(userId);\n        return res.json(fallback);\n      }\n      res.json(filtered);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch logos\" });\n    }\n  });\n\n  app.get(\"/api/logos/active\", async (req, res) => {\n    try {\n      const userId = parseInt(req.query.userId as string);\n      if (!userId) {\n        return res.status(400).json({ message: \"User ID is required\" });\n      }\n\n      const logos = await readJsonArray<any>(logosJsonPath);\n      const active = logos.find((l) => l.userId === userId && l.isActive);\n      res.json(active || null);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch active logo\" });\n    }\n  });\n\n  app.post(\"/api/logos\", upload.single(\"file\"), async (req, res) => {\n    try {\n      const { name, userId } = req.body;\n\n      if (!req.file) {\n        return res.status(400).json({ message: \"File is required\" });\n      }\n\n      const logoName = name || req.file.originalname || \"logo\";\n      const fileExtension = path.extname(\n        req.file.originalname || req.file.filename\n      );\n\n      let fileNameOnly = req.file.filename;\n      try {\n        const publicAssetsPath = await copyToPublicAssets(\n          req.file.path,\n          logoName,\n          fileExtension\n        );\n        fileNameOnly = publicAssetsPath.replace(\"/public/assets/\", \"\");\n      } catch (error) {\n        console.error(\"Failed to copy logo to public/assets:\", error);\n      }\n\n      // In-memory compatibility\n      const logo = await storage.createLogo({\n        name: logoName,\n        userId: parseInt(userId),\n        filePath: fileNameOnly,\n        isActive: false,\n      });\n\n      // Persist JSON\n      const arr = await readJsonArray<any>(logosJsonPath);\n      const record = {\n        id: logo?.id ?? nextId(arr),\n        name: logoName,\n        userId: parseInt(userId),\n        filePath: fileNameOnly, // frontend supports public/assets check\n        isActive: false,\n        createdAt: new Date().toISOString(),\n      };\n      arr.push(record);\n      await writeJsonArray(logosJsonPath, arr);\n\n      res.status(201).json(record);\n    } catch (error) {\n      console.error(\"Logo upload error:\", error);\n      res.status(500).json({ message: \"Failed to upload logo\" });\n    }\n  });\n\n  app.put(\"/api/logos/:id/activate\", async (req, res) => {\n    try {\n      const logoId = parseInt(req.params.id);\n      const { userId } = req.body;\n\n      const logos = await readJsonArray<any>(logosJsonPath);\n      let found = false;\n      const updated = logos.map((l) => {\n        if (l.userId === userId) {\n          const isTarget = l.id === logoId;\n          if (isTarget) found = true;\n          return { ...l, isActive: isTarget };\n        }\n        return l;\n      });\n      if (!found) {\n        return res.status(404).json({ message: \"Logo not found\" });\n      }\n      await writeJsonArray(logosJsonPath, updated);\n\n      // keep in-memory in sync\n      await storage.setActiveLogo(userId, logoId);\n\n      res.json({ message: \"Logo activated successfully\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to activate logo\" });\n    }\n  });\n\n  // Generate PDF (placeholder endpoint)\n  app.post(\"/api/campaigns/:id/generate-pdf\", async (req, res) => {\n    try {\n      // In a real implementation, you would use a library like puppeteer or jsPDF\n      // to generate a PDF from the brochure design\n      res.json({\n        message: \"PDF generation would be implemented here\",\n        downloadUrl: \"/api/downloads/brochure.pdf\",\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to generate PDF\" });\n    }\n  });\n\n  // Statistics endpoint\n  app.get(\"/api/statistics\", async (req, res) => {\n    try {\n      const userId = parseInt(req.query.userId as string);\n      if (!userId) {\n        return res.status(400).json({ message: \"User ID is required\" });\n      }\n\n      const campaigns = await storage.getCampaigns(userId);\n      const templates = await storage.getTemplates(userId);\n\n      const stats = {\n        totalCampaigns: campaigns.length,\n        activeCampaigns: campaigns.filter((c) => c.status === \"active\").length,\n        totalTemplates: templates.length,\n        totalDownloads: 156, // Mock value for demo\n      };\n\n      res.json(stats);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch statistics\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":22450},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/pages/social-media.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Share2, Facebook, Twitter, Instagram, Linkedin } from \"lucide-react\";\n\nexport default function SocialMedia() {\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Social Media</h1>\n        <p className=\"text-gray-600 mt-2\">Share your campaigns across social platforms</p>\n      </div>\n\n      {/* Coming Soon */}\n      <Card>\n        <CardContent className=\"p-12 text-center\">\n          <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <Share2 className=\"w-10 h-10 text-primary\" />\n          </div>\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Social Media Integration</h2>\n          <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n            Connect your social media accounts to share campaigns directly from the platform.\n            This feature is coming soon!\n          </p>\n          \n          <div className=\"flex justify-center space-x-4 mb-8\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n              <Facebook className=\"w-6 h-6 text-blue-600\" />\n            </div>\n            <div className=\"w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center\">\n              <Twitter className=\"w-6 h-6 text-sky-600\" />\n            </div>\n            <div className=\"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center\">\n              <Instagram className=\"w-6 h-6 text-pink-600\" />\n            </div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n              <Linkedin className=\"w-6 h-6 text-blue-700\" />\n            </div>\n          </div>\n          \n          <Button disabled>\n            Coming Soon\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1993},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"README.md":{"content":"# DigitalBrochure\n\n","size_bytes":19},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ...props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ...props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }","size_bytes":2608},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp, real } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  name: text(\"name\").notNull(),\n});\n\nexport const campaigns = pgTable(\"campaigns\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  status: text(\"status\").notNull().default(\"draft\"), // draft, active, completed\n  userId: integer(\"user_id\").notNull(),\n  templateId: integer(\"template_id\"),\n  logoId: integer(\"logo_id\"),\n  companyName: text(\"company_name\"),\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  validUntil: text(\"valid_until\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const products = pgTable(\"products\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  category: text(\"category\").notNull(),\n  originalPrice: real(\"original_price\").notNull(),\n  imageUrl: text(\"image_url\"),\n  description: text(\"description\"),\n});\n\nexport const campaignProducts = pgTable(\"campaign_products\", {\n  id: serial(\"id\").primaryKey(),\n  campaignId: integer(\"campaign_id\").notNull(),\n  productId: integer(\"product_id\").notNull(),\n  quantity: integer(\"quantity\").notNull().default(1),\n  discountPercent: real(\"discount_percent\").notNull().default(0),\n  newPrice: real(\"new_price\").notNull(),\n  positionX: real(\"position_x\").default(0),\n  positionY: real(\"position_y\").default(0),\n  scaleX: real(\"scale_x\").default(1.4),\n  scaleY: real(\"scale_y\").default(1.4),\n  pageNumber: integer(\"page_number\").default(1),\n});\n\nexport const templates = pgTable(\"templates\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  filePath: text(\"file_path\").notNull(),\n  thumbnailPath: text(\"thumbnail_path\"),\n  userId: integer(\"user_id\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const logos = pgTable(\"logos\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  filePath: text(\"file_path\").notNull(),\n  isActive: boolean(\"is_active\").notNull().default(false),\n  userId: integer(\"user_id\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n});\n\nexport const insertCampaignSchema = createInsertSchema(campaigns).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n});\n\nexport const insertCampaignProductSchema = createInsertSchema(campaignProducts).omit({\n  id: true,\n});\n\nexport const insertTemplateSchema = createInsertSchema(templates).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertLogoSchema = createInsertSchema(logos).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type Campaign = typeof campaigns.$inferSelect;\nexport type InsertCampaign = z.infer<typeof insertCampaignSchema>;\n\nexport type Product = typeof products.$inferSelect;\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\n\nexport type CampaignProduct = typeof campaignProducts.$inferSelect;\nexport type InsertCampaignProduct = z.infer<typeof insertCampaignProductSchema>;\n\nexport type Template = typeof templates.$inferSelect;\nexport type InsertTemplate = z.infer<typeof insertTemplateSchema>;\n\nexport type Logo = typeof logos.$inferSelect;\nexport type InsertLogo = z.infer<typeof insertLogoSchema>;\n\n// Login schema\nexport const loginSchema = z.object({\n  username: z.string().min(1, \"Username is required\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport type LoginCredentials = z.infer<typeof loginSchema>;\n","size_bytes":3957},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Bebas+Neue&family=Oswald:wght@400;600&family=Playfair+Display:wght@700&family=Raleway:wght@700&display=swap');\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Modern Supermarket Brochure Styles */\n.supermarket-gradient {\n  background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 30%, #fde68a 100%);\n}\n\n.product-card-modern {\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n}\n\n.product-card-modern:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n}\n\n.price-highlight {\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);\n  font-weight: 900;\n  letter-spacing: -0.5px;\n}\n\n.discount-burst {\n  animation: pulse-glow 2s infinite;\n}\n\n@keyframes pulse-glow {\n  0%, 100% {\n    box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(239, 68, 68, 0.8);\n  }\n}\n\n.supermarket-title {\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n  font-weight: 800;\n}\n\n/* Animated promotional elements */\n@keyframes bounce-in {\n  0% {\n    transform: scale(0.8) rotate(-10deg);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.1) rotate(0deg);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n}\n\n.promo-badge {\n  animation: bounce-in 0.6s ease-out;\n}\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Custom styles for brochure editor */\n.drag-drop-area {\n  background-image: radial-gradient(circle, hsl(220, 13%, 91%) 1px, transparent 1px);\n  background-size: 20px 20px;\n}\n\n.draggable-element {\n  position: absolute;\n  cursor: move;\n}\n\n.draggable-element:hover {\n  outline: 2px solid hsl(207, 90%, 54%);\n  outline-offset: 2px;\n}\n\n.sidebar-collapsed {\n  width: 64px;\n}\n\n.sidebar-expanded {\n  width: 256px;\n}\n\n.transition-width {\n  transition: width 0.3s ease;\n}\n\n/* Professional gradient backgrounds for templates */\n.template-gradient-1 {\n  background: linear-gradient(135deg, hsl(220, 100%, 66%) 0%, hsl(261, 52%, 63%) 100%);\n}\n\n.template-gradient-2 {\n  background: linear-gradient(135deg, hsl(142, 76%, 36%) 0%, hsl(192, 100%, 67%) 100%);\n}\n\n.template-gradient-3 {\n  background: linear-gradient(135deg, hsl(24, 95%, 53%) 0%, hsl(326, 90%, 68%) 100%);\n}\n\n.template-gradient-4 {\n  background: linear-gradient(135deg, hsl(220, 13%, 18%) 0%, hsl(220, 13%, 9%) 100%);\n}\n\n/* Remove all product container styling */\n.product-card-modern {\n  background: none !important;\n  border: none !important;\n  box-shadow: none !important;\n  backdrop-filter: none !important;\n}\n\n/* Ensure no background on any product elements */\n.product-card-modern, \n.product-card-modern * {\n  background-color: transparent !important;\n  background-image: none !important;\n  border: none !important;\n}\n\n/* Enhanced product pricing display */\n.price-highlight {\n  text-shadow: 0 1px 3px rgba(0,0,0,0.5);\n}\n\n/* Promotional badge animations */\n.promo-badge {\n  animation: pulse 2s infinite;\n}\n\n.discount-burst {\n  animation: bounce 1s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1) rotate(0deg); }\n  50% { transform: scale(1.05) rotate(-1deg); }\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% { transform: translateY(0) rotate(12deg); }\n  40% { transform: translateY(-3px) rotate(10deg); }\n  60% { transform: translateY(-2px) rotate(14deg); }\n}\n","size_bytes":4908},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/hooks/use-auth\";\nimport LoginPage from \"@/pages/login\";\nimport DashboardLayout from \"@/components/layout/dashboard-layout\";\nimport Dashboard from \"@/pages/dashboard\";\nimport CreateCampaign from \"@/pages/create-campaign\";\nimport ProductManagement from \"@/pages/product-management\";\nimport TemplateUpload from \"@/pages/template-upload\";\nimport LogoUpload from \"@/pages/logo-upload\";\nimport SocialMedia from \"@/pages/social-media\";\nimport Statistics from \"@/pages/statistics\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction AppRouter() {\n  const { user } = useAuth();\n\n  if (!user) {\n    return <LoginPage />;\n  }\n\n  return (\n    <DashboardLayout>\n      <Switch>\n        <Route path=\"/\" component={Dashboard} />\n        <Route path=\"/dashboard\" component={Dashboard} />\n        <Route path=\"/create-campaign\" component={CreateCampaign} />\n        <Route path=\"/product-management\" component={ProductManagement} />\n        <Route path=\"/template-upload\" component={TemplateUpload} />\n        <Route path=\"/logo-upload\" component={LogoUpload} />\n        <Route path=\"/social-media\" component={SocialMedia} />\n        <Route path=\"/statistics\" component={Statistics} />\n        <Route component={NotFound} />\n      </Switch>\n    </DashboardLayout>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Toaster />\n          <AppRouter />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1828},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/pages/login.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { loginSchema, type LoginCredentials } from \"@shared/schema\";\nimport { login } from \"@/lib/auth\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { FileText, AlertCircle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function LoginPage() {\n  const [isLoading, setIsLoading] = useState(false);\n  const { setUser } = useAuth();\n  const { toast } = useToast();\n\n  const form = useForm<LoginCredentials>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      username: \"test\",\n      password: \"test\",\n    },\n  });\n\n  const onSubmit = async (data: LoginCredentials) => {\n    setIsLoading(true);\n    try {\n      const response = await login(data);\n      setUser(response.user);\n      toast({\n        title: \"Login successful\",\n        description: `Welcome back, ${response.user.name}!`,\n      });\n    } catch (error) {\n      toast({\n        title: \"Login failed\",\n        description: \"Invalid credentials. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full\">\n        <Card className=\"shadow-xl\">\n          <CardContent className=\"pt-8\">\n            <div className=\"text-center mb-8\">\n              <div className=\"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-6\">\n                <FileText className=\"text-white text-2xl\" />\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">E-Brochure Creator</h1>\n              <p className=\"text-gray-600 mt-2\">Professional marketing made simple</p>\n            </div>\n\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n              <div>\n                <Label htmlFor=\"username\">Username</Label>\n                <Input\n                  id=\"username\"\n                  {...form.register(\"username\")}\n                  placeholder=\"Enter your username\"\n                  className=\"mt-2\"\n                />\n                {form.formState.errors.username && (\n                  <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    {form.formState.errors.username.message}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <Label htmlFor=\"password\">Password</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  {...form.register(\"password\")}\n                  placeholder=\"Enter your password\"\n                  className=\"mt-2\"\n                />\n                {form.formState.errors.password && (\n                  <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    {form.formState.errors.password.message}\n                  </p>\n                )}\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isLoading}\n              >\n                {isLoading ? \"Signing in...\" : \"Sign In\"}\n              </Button>\n            </form>\n\n            <div className=\"text-center space-y-4 mt-6\">\n              <a href=\"#\" className=\"text-primary hover:text-primary/80 text-sm font-medium\">\n                Forgot password?\n              </a>\n              <div className=\"text-xs text-gray-500\">\n                Demo credentials: username: <strong>test</strong>, password: <strong>test</strong>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4132},"client/src/components/layout/sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  BarChart3,\n  PlusCircle,\n  Share2,\n  BarChart,\n  Upload,\n  Image,\n  Package,\n} from \"lucide-react\";\n\ninterface SidebarProps {\n  collapsed: boolean;\n}\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/dashboard\", icon: BarChart3 },\n  { name: \"Create Campaign\", href: \"/create-campaign\", icon: PlusCircle },\n  { name: \"Product Management\", href: \"/product-management\", icon: Package },\n  { name: \"Social Media\", href: \"/social-media\", icon: Share2 },\n  { name: \"Statistics\", href: \"/statistics\", icon: BarChart },\n  { name: \"Template Upload\", href: \"/template-upload\", icon: Upload },\n  { name: \"Logo Upload\", href: \"/logo-upload\", icon: Image },\n];\n\nexport default function Sidebar({ collapsed }: SidebarProps) {\n  const [location] = useLocation();\n\n  return (\n    <aside className={cn(\n      \"bg-white border-r border-gray-200 flex-shrink-0 transition-width\",\n      collapsed ? \"w-16\" : \"w-64\"\n    )}>\n      <nav className=\"p-4 space-y-2\">\n        {navigation.map((item) => {\n          const Icon = item.icon;\n          const isActive = location === item.href || (item.href === \"/dashboard\" && location === \"/\");\n          \n          return (\n            <Link key={item.name} href={item.href}>\n              <div className={cn(\n                \"flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-colors cursor-pointer\",\n                isActive\n                  ? \"bg-primary/10 text-primary\"\n                  : \"text-gray-700 hover:bg-gray-50\"\n              )}>\n                <Icon className=\"w-5 h-5\" />\n                {!collapsed && <span>{item.name}</span>}\n              </div>\n            </Link>\n          );\n        })}\n      </nav>\n    </aside>\n  );\n}\n","size_bytes":1780},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }","size_bytes":1229},"replit.md":{"content":"# E-Brochure Creator Application\n\n## Overview\n\nThis is a full-stack web application for creating digital brochures and promotional campaigns. The system allows users to create campaigns by selecting products, applying discounts, and generating professional brochures. Built with a React frontend, Express.js backend, and PostgreSQL database using Drizzle ORM.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Full-Stack TypeScript Application\nThe application follows a monorepo structure with separate client and server directories, sharing common types and schemas through a shared directory. The system uses modern web technologies with TypeScript throughout for type safety.\n\n### Frontend Architecture\n- **Framework**: React 18 with Vite for development and building\n- **UI Library**: shadcn/ui components built on Radix UI primitives\n- **Styling**: Tailwind CSS with CSS variables for theming\n- **State Management**: TanStack Query (React Query) for server state\n- **Routing**: Wouter for lightweight client-side routing\n- **Form Handling**: React Hook Form with Zod validation\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript with ES modules\n- **API Design**: RESTful API with JSON responses\n- **Database**: PostgreSQL with Drizzle ORM\n- **File Uploads**: Multer for handling file uploads (templates, logos)\n- **Development**: Hot reload with Vite integration\n\n## Key Components\n\n### Authentication System\n- Simple username/password authentication\n- Client-side session management with localStorage\n- Protected routes requiring authentication\n- Default test credentials (username: \"test\", password: \"test\")\n\n### Campaign Management\n- Campaign creation with product selection\n- Product search and filtering by category\n- Discount calculation and pricing management\n- Campaign status tracking (draft, active, completed)\n\n### Product Management\n- Product catalog with categories (Electronics, Fashion, Home & Garden)\n- Product search functionality\n- Image handling for product displays\n- Price management with discount calculations\n\n### Template System\n- Custom template upload functionality\n- Template management for brochure generation\n- File storage for template assets\n- Thumbnail generation for template previews\n\n### Logo Management\n- Company logo upload and management\n- Active logo selection for brochures\n- File storage for logo assets\n\n### Brochure Generation\n- Visual brochure editor with template selection\n- Product positioning on brochures\n- Company branding integration\n- PDF generation for final output\n\n## Data Flow\n\n### Client-Server Communication\n1. Frontend makes HTTP requests to backend API endpoints\n2. Backend processes requests and interacts with PostgreSQL database\n3. Responses are returned as JSON with appropriate status codes\n4. TanStack Query manages caching and state synchronization\n\n### File Upload Flow\n1. Files uploaded through multipart/form-data\n2. Multer middleware processes uploads to local storage\n3. File paths stored in database for reference\n4. Files served through static routes or API endpoints\n\n### Campaign Creation Workflow\n1. User searches and selects products\n2. Products added to campaign with quantities and discounts\n3. Template and logo selected for brochure design\n4. Campaign saved as draft or activated\n5. Brochure generated and available for download\n\n## External Dependencies\n\n### Database\n- **Neon Database**: PostgreSQL hosting service\n- **Connection**: Uses @neondatabase/serverless for connections\n- **Migrations**: Drizzle Kit for schema management\n\n### UI Components\n- **Radix UI**: Comprehensive set of unstyled, accessible components\n- **Lucide React**: Icon library for consistent iconography\n- **Embla Carousel**: Carousel/slider functionality\n- **Date-fns**: Date manipulation and formatting\n\n### Development Tools\n- **Vite**: Build tool and development server\n- **ESBuild**: Fast JavaScript bundler for production\n- **Replit Integration**: Development environment optimizations\n\n## Deployment Strategy\n\n### Build Process\n1. Frontend built using Vite to static assets in `dist/public`\n2. Backend bundled using ESBuild to `dist/index.js`\n3. Single deployable artifact with server serving static files\n\n### Environment Configuration\n- Database connection via `DATABASE_URL` environment variable\n- Development vs production mode detection\n- File upload directory configuration\n\n### Production Considerations\n- Static file serving for uploaded assets\n- Database connection pooling\n- Error handling and logging\n- CORS configuration for cross-origin requests\n\n## Recent Changes: Latest modifications with dates\n\n### January 27, 2025 - Enhanced Supermarket Style Design\n- **Authentic Supermarket Price Tags**: Redesigned to match Turkish supermarket catalogs with white name labels and red/yellow price backgrounds\n- **Maximum Product Sizing**: Single product 380px, 2 products 300px, 3 products 240px for optimal space utilization  \n- **Complete Background Removal**: Products appear as pure shapes without any container backgrounds or frames\n- **Modern Price Display**: Large white prices on colored backgrounds (red for discounts, yellow for regular)\n- **Turkish Promotional Elements**: Added \"FIRSAT!\" and \"ÇOK UCUZ\" badges matching local supermarket style\n- **Enhanced Visual Separation**: Drop shadows and floating price tags for professional appearance\n- **Smart Layout System**: Intelligent grid arrangement preventing overlaps with proper spacing\n\n### January 24, 2025 - Enhanced Design Experience\n- **Date Management**: Date selector moved outside design area for better UX\n- **Interactive Elements**: Added draggable date elements on each brochure page \n- **Logo Interaction**: Logo area now clickable for upload/removal in Design view\n- **Auto Layout**: Added automatic product arrangement feature enabled by default\n- **Export Quality**: Enhanced JPEG download with 2x scale and 95% quality\n- **Multi-page Support**: Fixed Create Campaign button and ZIP download for multiple pages\n\n### Development Environment\n- Hot module replacement for frontend\n- TypeScript compilation checking\n- Automatic server restart on changes\n- Integrated error overlay for development\n\nThe application provides a complete solution for digital brochure creation with a focus on user experience, performance, and maintainability. The modular architecture allows for easy extension and modification of features while maintaining type safety throughout the stack.","size_bytes":6532},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/layout/topbar.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Menu, FileText, LogOut } from \"lucide-react\";\n\ninterface TopBarProps {\n  onToggleSidebar: () => void;\n}\n\nexport default function TopBar({ onToggleSidebar }: TopBarProps) {\n  const { user, logout } = useAuth();\n\n  return (\n    <nav className=\"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between\">\n      <div className=\"flex items-center space-x-4\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={onToggleSidebar}\n          className=\"p-2\"\n        >\n          <Menu className=\"w-5 h-5 text-gray-600\" />\n        </Button>\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n            <FileText className=\"w-4 h-4 text-white\" />\n          </div>\n          <span className=\"font-semibold text-gray-900\">E-Brochure Creator</span>\n        </div>\n      </div>\n\n      <div className=\"flex items-center space-x-4\">\n        <Select defaultValue=\"english\">\n          <SelectTrigger className=\"w-[120px]\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"english\">English</SelectItem>\n            <SelectItem value=\"spanish\">Spanish</SelectItem>\n            <SelectItem value=\"french\">French</SelectItem>\n            <SelectItem value=\"german\">German</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <div className=\"flex items-center space-x-3\">\n          <img\n            src=\"https://images.unsplash.com/photo-1494790108755-2616b612b526?ixlib=rb-4.0.3&auto=format&fit=crop&w=32&h=32\"\n            alt=\"Admin Avatar\"\n            className=\"w-8 h-8 rounded-full object-cover\"\n          />\n          <span className=\"text-sm font-medium text-gray-700\">{user?.name}</span>\n        </div>\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={logout}\n          className=\"bg-red-50 hover:bg-red-100 text-red-600 border-red-200\"\n        >\n          <LogOut className=\"w-4 h-4 mr-2\" />\n          Logout\n        </Button>\n      </div>\n    </nav>\n  );\n}\n","size_bytes":2305},"client/src/pages/create-campaign.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport ProductSearch from \"@/components/products/product-search\";\nimport SelectedProducts from \"@/components/products/selected-products\";\nimport BrochureEditor from \"@/components/brochure/brochure-editor\";\nimport {\n  Layout,\n  Users,\n  FileText,\n  ArrowLeft,\n  ArrowRight,\n  CheckCircle,\n  Package,\n} from \"lucide-react\";\nimport type { Product, CampaignProduct, Template } from \"@shared/schema\";\n\ntype CreationStep = \"products\" | \"pages\" | \"templates\" | \"editor\";\n\nexport default function CreateCampaign() {\n  const { user } = useAuth();\n  const [location] = useLocation();\n  const [selectedProducts, setSelectedProducts] = useState<\n    (CampaignProduct & { product: Product })[]\n  >([]);\n  const [currentCampaign, setCurrentCampaign] = useState<any>(null);\n\n  // New campaign creation flow state\n  const [creationStep, setCreationStep] = useState<CreationStep>(\"products\");\n  const [selectedTemplateId, setSelectedTemplateId] = useState<number | null>(\n    null\n  );\n  const [pageCount, setPageCount] = useState<number>(1);\n  const [pageTemplates, setPageTemplates] = useState<\n    Record<number, number | null>\n  >({});\n\n  // Check if we're editing an existing campaign\n  const urlParams = new URLSearchParams(window.location.search);\n  const campaignId = urlParams.get(\"campaignId\");\n  const isEditing = !!campaignId;\n\n  // Fetch campaign data if editing\n  const { data: campaign } = useQuery({\n    queryKey: [\"/api/campaigns\", campaignId],\n    queryFn: async () => {\n      const response = await fetch(`/api/campaigns/${campaignId}`);\n      if (!response.ok) throw new Error(\"Failed to fetch campaign\");\n      return response.json();\n    },\n    enabled: isEditing && !!campaignId,\n  });\n\n  // Fetch campaign products if editing\n  const { data: campaignProducts } = useQuery({\n    queryKey: [\"/api/campaigns\", campaignId, \"products\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/campaigns/${campaignId}/products`);\n      if (!response.ok) throw new Error(\"Failed to fetch campaign products\");\n      return response.json();\n    },\n    enabled: isEditing && !!campaignId,\n  });\n\n  // Fetch templates for layout selection\n  const { data: templates = [] } = useQuery<Template[]>({\n    queryKey: [\"/api/templates\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/templates?userId=${user.id}`);\n      if (!response.ok) throw new Error(\"Failed to fetch templates\");\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  // Load campaign data when editing\n  useEffect(() => {\n    if (isEditing && campaign) {\n      setCurrentCampaign(campaign);\n    }\n  }, [campaign, isEditing]);\n\n  // Load campaign products when editing\n  useEffect(() => {\n    if (isEditing && campaignProducts) {\n      setSelectedProducts(campaignProducts);\n      // Skip to editor step if editing existing campaign\n      setCreationStep(\"editor\");\n    }\n  }, [campaignProducts, isEditing]);\n\n  // Auto-distribute products when moving to editor step\n  const handleProceedToEditor = () => {\n    try {\n      if (selectedProducts.length > 0) {\n        // Auto-distribute products across the selected page count and set pages for brochure editor\n        const updatedProducts = selectedProducts.map((item, index) => ({\n          ...item,\n          pageNumber: (index % pageCount) + 1,\n        }));\n        setSelectedProducts(updatedProducts);\n      }\n      setCreationStep(\"editor\");\n    } catch (error) {\n      console.error(\"Error proceeding to editor:\", error);\n      // Still proceed to editor even if there's an error with product distribution\n      setCreationStep(\"editor\");\n    }\n  };\n\n  const handleProductSelect = (product: Product) => {\n    const campaignProduct: CampaignProduct & { product: Product } = {\n      id: Date.now(), // Temporary ID\n      campaignId: 0, // Will be set when campaign is created\n      productId: product.id,\n      quantity: 1,\n      discountPercent: 0,\n      newPrice: product.originalPrice,\n      positionX: 0,\n      positionY: 0,\n      scaleX: 1,\n      scaleY: 1,\n      pageNumber: 1,\n      product,\n    };\n    setSelectedProducts((prev) => [...prev, campaignProduct]);\n  };\n\n  const handleProductUpdate = (\n    id: number,\n    updates: Partial<CampaignProduct>\n  ) => {\n    setSelectedProducts((prev) =>\n      prev.map((cp) => (cp.id === id ? { ...cp, ...updates } : cp))\n    );\n  };\n\n  const handleProductPositionUpdate = (\n    productId: number,\n    x: number,\n    y: number\n  ) => {\n    setSelectedProducts((prev) =>\n      prev.map((cp) =>\n        cp.id === productId ? { ...cp, positionX: x, positionY: y } : cp\n      )\n    );\n  };\n\n  const handleProductRemove = (id: number) => {\n    setSelectedProducts((prev) => prev.filter((cp) => cp.id !== id));\n  };\n\n  // Step indicators\n  const steps = [\n    {\n      id: \"products\",\n      name: \"Products\",\n      icon: Package,\n      description: \"Select products\",\n    },\n    {\n      id: \"pages\",\n      name: \"Pages\",\n      icon: FileText,\n      description: \"Set page count\",\n    },\n    {\n      id: \"templates\",\n      name: \"Templates\",\n      icon: Layout,\n      description: \"Choose templates\",\n    },\n    {\n      id: \"editor\",\n      name: \"Design\",\n      icon: CheckCircle,\n      description: \"Arrange & finalize\",\n    },\n  ];\n\n  const currentStepIndex = steps.findIndex((step) => step.id === creationStep);\n\n  const renderStepContent = () => {\n    switch (creationStep) {\n      case \"products\":\n        return (\n          <div className=\"max-w-6xl mx-auto\">\n            <Card className=\"mb-6\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Package className=\"w-6 h-6\" />\n                  <span>Select Your Products</span>\n                </CardTitle>\n                <CardDescription>\n                  Choose the products you want to feature in your campaign. You\n                  can set discounts and quantities for each product.\n                </CardDescription>\n              </CardHeader>\n            </Card>\n\n            <div className=\"sticky top-24 z-30 mb-6\">\n              <div className=\"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-gray-200 bg-white/95 px-4 py-3 shadow-sm backdrop-blur\">\n                <div className=\"text-sm text-gray-600\">\n                  {selectedProducts.length > 0\n                    ? `${selectedProducts.length} product${\n                        selectedProducts.length > 1 ? \"s\" : \"\"\n                      } selected`\n                    : \"Select at least one product to continue\"}\n                </div>\n                <Button\n                  onClick={() => setCreationStep(\"pages\")}\n                  disabled={selectedProducts.length === 0}\n                >\n                  Next: Page Setup\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              <div>\n                <ProductSearch onProductSelect={handleProductSelect} />\n              </div>\n              <div>\n                <SelectedProducts\n                  products={selectedProducts}\n                  onProductUpdate={handleProductUpdate}\n                  onProductRemove={handleProductRemove}\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      case \"pages\":\n        return (\n          <Card className=\"max-w-2xl mx-auto\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <FileText className=\"w-6 h-6\" />\n                <span>Configure Pages</span>\n              </CardTitle>\n              <CardDescription>\n                Choose how many pages your brochure should have. Products will\n                be automatically distributed evenly across all pages.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Number of Pages\n                  </label>\n                  <Select\n                    value={pageCount.toString()}\n                    onValueChange={(value) => setPageCount(parseInt(value))}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {[1, 2, 3, 4, 5, 6].map((num) => (\n                        <SelectItem key={num} value={num.toString()}>\n                          {num} Page{num > 1 ? \"s\" : \"\"}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 mb-4\">\n                    Distribution Preview\n                  </h4>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Your {selectedProducts.length} products will be distributed\n                    across {pageCount} page{pageCount > 1 ? \"s\" : \"\"}.\n                  </p>\n\n                  {/* Visual Page Preview */}\n                  <div className=\"flex justify-center space-x-4\">\n                    {Array.from({ length: pageCount }, (_, pageIndex) => {\n                      const pageProducts = selectedProducts.filter(\n                        (_, index) => index % pageCount === pageIndex\n                      );\n                      return (\n                        <div\n                          key={pageIndex}\n                          className=\"flex flex-col items-center\"\n                        >\n                          <div className=\"w-20 h-24 border-2 border-gray-300 rounded-lg bg-white shadow-sm relative\">\n                            {/* Page number */}\n                            <div className=\"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white text-xs px-2 py-0.5 rounded\">\n                              {pageIndex + 1}\n                            </div>\n                            {/* Product placeholders */}\n                            <div className=\"p-1 h-full flex flex-col justify-center\">\n                              {pageProducts\n                                .slice(0, 4)\n                                .map((_, productIndex) => (\n                                  <div\n                                    key={productIndex}\n                                    className=\"flex items-center justify-center mb-1\"\n                                  >\n                                    <Package className=\"w-3 h-3 text-blue-400\" />\n                                  </div>\n                                ))}\n                              {pageProducts.length > 4 && (\n                                <div className=\"text-center text-xs text-gray-400\">\n                                  +{pageProducts.length - 4}\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"text-xs text-gray-500 mt-2\">\n                            {pageProducts.length} product\n                            {pageProducts.length !== 1 ? \"s\" : \"\"}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 flex justify-between\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setCreationStep(\"products\")}\n                >\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back: Products\n                </Button>\n                <Button onClick={() => setCreationStep(\"templates\")}>\n                  Next: Choose Templates\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        );\n\n      case \"templates\":\n        return (\n          <Card className=\"max-w-5xl mx-auto\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Layout className=\"w-6 h-6\" />\n                <span>Choose Templates for Each Page</span>\n              </CardTitle>\n              <CardDescription>\n                Select templates for each page of your brochure. You can choose\n                different templates for each page or use the same template for\n                all pages.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                {Array.from({ length: pageCount }, (_, pageIndex) => (\n                  <div key={pageIndex} className=\"border rounded-lg p-4\">\n                    <h4 className=\"font-medium text-gray-900 mb-3\">\n                      Page {pageIndex + 1} Template\n                    </h4>\n                    {templates.length === 0 ? (\n                      <div className=\"text-center py-8\">\n                        <Layout className=\"w-12 h-12 mx-auto text-gray-400 mb-2\" />\n                        <p className=\"text-gray-600 text-sm\">\n                          No templates available. Default background will be\n                          used.\n                        </p>\n                      </div>\n                    ) : (\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n                        <div\n                          className={`relative border-2 rounded-lg cursor-pointer transition-all hover:shadow-lg ${\n                            !pageTemplates[pageIndex + 1]\n                              ? \"border-blue-500 bg-blue-50\"\n                              : \"border-gray-200 hover:border-gray-300\"\n                          }`}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setPageTemplates((prev) => ({\n                              ...prev,\n                              [pageIndex + 1]: null,\n                            }));\n                          }}\n                          data-testid={`template-default-page-${pageIndex + 1}`}\n                        >\n                          <div className=\"aspect-[3/4] rounded-lg overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center\">\n                            <Layout className=\"w-8 h-8 text-white\" />\n                          </div>\n                          <div className=\"p-2\">\n                            <h5 className=\"text-sm font-medium text-gray-900\">\n                              Default Background\n                            </h5>\n                            {!pageTemplates[pageIndex + 1] && (\n                              <div className=\"absolute top-1 right-1 bg-blue-500 text-white rounded-full p-1\">\n                                <CheckCircle className=\"w-3 h-3\" />\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        {templates.map((template) => (\n                          <div\n                            key={template.id}\n                            className={`relative border-2 rounded-lg cursor-pointer transition-all hover:shadow-lg ${\n                              pageTemplates[pageIndex + 1] === template.id\n                                ? \"border-blue-500 bg-blue-50\"\n                                : \"border-gray-200 hover:border-gray-300\"\n                            }`}\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setPageTemplates((prev) => ({\n                                ...prev,\n                                [pageIndex + 1]: template.id,\n                              }));\n                            }}\n                            data-testid={`template-${template.id}-page-${pageIndex + 1}`}\n                          >\n                            <div className=\"aspect-[3/4] rounded-lg overflow-hidden\">\n                              <img\n                                src={`/uploads/${template.filePath}`}\n                                alt={template.name}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            </div>\n                            <div className=\"p-2\">\n                              <h5 className=\"text-sm font-medium text-gray-900\">\n                                {template.name}\n                              </h5>\n                              {pageTemplates[pageIndex + 1] === template.id && (\n                                <div className=\"absolute top-1 right-1 bg-blue-500 text-white rounded-full p-1\">\n                                  <CheckCircle className=\"w-3 h-3\" />\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"mt-6 flex justify-between\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setCreationStep(\"pages\")}\n                >\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back: Page Setup\n                </Button>\n                <Button onClick={handleProceedToEditor}>\n                  Start Designing\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        );\n\n      case \"editor\":\n        return (\n          <div className=\"space-y-6\">\n            {/* Step header for editor mode */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"w-6 h-6\" />\n                  <span>Design Your Brochure</span>\n                </CardTitle>\n                <CardDescription>\n                  Arrange your products on each page, adjust sizes and\n                  positions, and finalize your campaign design. Products are\n                  already distributed across your pages and ready for layout\n                  adjustments.\n                </CardDescription>\n              </CardHeader>\n            </Card>\n\n            {!isEditing && (\n              <div className=\"flex justify-start\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setCreationStep(\"templates\")}\n                >\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back: Templates\n                </Button>\n              </div>\n            )}\n\n            {/* Design-only Editor */}\n            <BrochureEditor\n              selectedProducts={selectedProducts}\n              campaign={currentCampaign}\n              onCampaignUpdate={setCurrentCampaign}\n              onProductPositionUpdate={handleProductPositionUpdate}\n              isDesignMode={true}\n              initialPages={pageCount}\n              pageTemplates={pageTemplates}\n            />\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Step Progress Indicator */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-center space-x-8\">\n          {steps.map((step, index) => {\n            const Icon = step.icon;\n            const isActive = creationStep === step.id;\n            const isCompleted = index < currentStepIndex;\n\n            return (\n              <div key={step.id} className=\"flex items-center space-x-2\">\n                <div\n                  className={`flex items-center space-x-3 ${\n                    isActive\n                      ? \"text-blue-600\"\n                      : isCompleted\n                      ? \"text-green-600\"\n                      : \"text-gray-400\"\n                  }`}\n                >\n                  <div\n                    className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${\n                      isActive\n                        ? \"border-blue-600 bg-blue-50\"\n                        : isCompleted\n                        ? \"border-green-600 bg-green-50\"\n                        : \"border-gray-300 bg-gray-50\"\n                    }`}\n                  >\n                    <Icon className=\"w-5 h-5\" />\n                  </div>\n                  <div>\n                    <div className=\"font-medium\">{step.name}</div>\n                    <div className=\"text-xs text-gray-500\">\n                      {step.description}\n                    </div>\n                  </div>\n                </div>\n                {index < steps.length - 1 && (\n                  <div\n                    className={`w-8 h-0.5 ${\n                      isCompleted ? \"bg-green-600\" : \"bg-gray-300\"\n                    }`}\n                  />\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Step Content */}\n      {renderStepContent()}\n    </div>\n  );\n}\n","size_bytes":21995},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/brochure/brochure-editor.tsx":{"content":"//#region imports\nimport { useState, useRef, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Eye,\n  Download,\n  Building,\n  CalendarIcon,\n  Image,\n  Move,\n  Save,\n  FileText,\n  Plus,\n  Minus,\n  RotateCw,\n  Maximize2,\n  Upload,\n  Phone,\n  Instagram,\n  Facebook,\n  Twitter,\n} from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport type { Product, CampaignProduct, Template, Logo } from \"@shared/schema\";\n//#endregion\n\n// Constants for design defaults\nconst DEFAULT_PRODUCT_SCALE = 1.4;\nconst HEADER_BG_COLOR = \"transparent\";\nconst HEADER_BG_OPACITY = 0;\nconst DEFAULT_BACKGROUND_COLOR = \"transparent\";\n\ninterface BrochureEditorProps {\n  selectedProducts: (CampaignProduct & { product: Product })[];\n  campaign: any;\n  onCampaignUpdate: (campaign: any) => void;\n  onProductPositionUpdate?: (productId: number, x: number, y: number) => void;\n  isDesignMode?: boolean;\n  initialPages?: number;\n  pageTemplates?: Record<number, number | null>;\n}\n\nexport default function BrochureEditor({\n  selectedProducts,\n  campaign,\n  onCampaignUpdate,\n  onProductPositionUpdate,\n  isDesignMode = false,\n  initialPages = 1,\n  pageTemplates = {},\n}: BrochureEditorProps) {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, setLocation] = useLocation();\n  //#region state\n  const [selectedTemplateId, setSelectedTemplateId] = useState<number | null>(\n    null\n  );\n  const [selectedLogoId, setSelectedLogoId] = useState<number | null>(null);\n  const [companyName, setCompanyName] = useState(\"Your Company Name\");\n  const [showCompanyName, setShowCompanyName] = useState(true);\n  const [isEditingCompanyName, setIsEditingCompanyName] = useState(false);\n  const [startDate, setStartDate] = useState<Date>();\n  const [endDate, setEndDate] = useState<Date>();\n  const [campaignName, setCampaignName] = useState(\"\");\n  const [campaignDescription, setCampaignDescription] = useState(\"\");\n  const [isCreateCampaignOpen, setIsCreateCampaignOpen] = useState(false);\n  const [isDownloadOpen, setIsDownloadOpen] = useState(false);\n  const [isLogoSelectOpen, setIsLogoSelectOpen] = useState(false);\n  const [draggedElement, setDraggedElement] = useState<string | null>(null);\n  const [draggedProductId, setDraggedProductId] = useState<number | null>(null);\n  const [rotatingProductId, setRotatingProductId] = useState<number | null>(\n    null\n  );\n  const [resizingProductId, setResizingProductId] = useState<number | null>(\n    null\n  );\n  const [lastMouseAngle, setLastMouseAngle] = useState<number>(0);\n  // Logo transform state\n  const [isRotatingLogo, setIsRotatingLogo] = useState<boolean>(false);\n  const [isResizingLogo, setIsResizingLogo] = useState<boolean>(false);\n  const [logoRotation, setLogoRotation] = useState<number>(0);\n  const [logoScale, setLogoScale] = useState<number>(1);\n  const [initialLogoResize, setInitialLogoResize] = useState<{\n    startX: number;\n    startY: number;\n    startScale: number;\n  } | null>(null);\n  const [isLogoSelected, setIsLogoSelected] = useState<boolean>(false);\n  const [selectedProductIdForControls, setSelectedProductIdForControls] =\n    useState<number | null>(null);\n  // Style & template controls\n  const [showSupermarketTemplate, setShowSupermarketTemplate] = useState(true);\n  const [bannerBgColor, setBannerBgColor] = useState<string>(\"#e2b474\");\n  const [bannerText, setBannerText] = useState<string>(\n    \"INDIRIMLI ALIŞVERİŞ REHBERİ\"\n  );\n  const [bannerTextColor, setBannerTextColor] = useState<string>(\"#ffffff\");\n  const [footerBgColor, setFooterBgColor] = useState<string>(\"#e2b474\");\n  const [titleColor, setTitleColor] = useState<string>(\"#a281fe\"); // purple\n  const [titleFont, setTitleFont] = useState<string>(\n    \"'Bebas Neue', 'Montserrat', 'Arial Black', sans-serif\"\n  );\n  const [pages, setPages] = useState<number>(initialPages);\n  // Instagram format selection: \"4:5\" (1080x1350) or \"1:1\" (1080x1080)\n  const [instagramFormat, setInstagramFormat] = useState<\"4:5\" | \"1:1\">(\"4:5\");\n  const [elementPositions, setElementPositions] = useState({\n    logo: { x: 32, y: 32 },\n    companyName: { x: 112, y: 32 },\n    dateRange: { x: 450, y: 32 },\n  });\n  const [productPositions, setProductPositions] = useState<\n    Record<number, { x: number; y: number }>\n  >({});\n  const [productRotations, setProductRotations] = useState<\n    Record<number, number>\n  >({});\n  const [productScales, setProductScales] = useState<\n    Record<number, { scaleX: number; scaleY: number }>\n  >({});\n  const [productPages, setProductPages] = useState<Record<number, number>>({});\n  // Fixed 3x3 grid cell index per product (0..8)\n  const [productGridIndex, setProductGridIndex] = useState<\n    Record<number, number>\n  >({});\n  const [dropTargetPage, setDropTargetPage] = useState<number | null>(null);\n  const [datePositions, setDatePositions] = useState<\n    Record<number, { x: number; y: number }>\n  >({});\n  const [isDraggingDate, setIsDraggingDate] = useState<number | null>(null);\n  const [dateDragStart, setDateDragStart] = useState<{\n    x: number;\n    y: number;\n  } | null>(null);\n  const [initialResizeState, setInitialResizeState] = useState<{\n    startX: number;\n    startY: number;\n    startScale: { scaleX: number; scaleY: number };\n  } | null>(null);\n  const canvasRef = useRef<HTMLDivElement>(null);\n  //#endregion\n\n  // Header/Footer editable content\n  const [headerPhoneText, setHeaderPhoneText] = useState<string>(\n    \"Ücretsiz Sipariş Hattı\"\n  );\n  const [headerPhoneNumber, setHeaderPhoneNumber] =\n    useState<string>(\"0552 155 66 55\");\n  const [footerAddress, setFooterAddress] = useState<string>(\n    \"Kazımkarabekir Mah. Şht. Sblv. Beylerbeyi Sit. A Blok No:26 İlkadım/SAMSUN\"\n  );\n  const [socialInstagram, setSocialInstagram] =\n    useState<string>(\"karataymarket\");\n  const [socialFacebook, setSocialFacebook] = useState<string>(\"karataymarket\");\n  const [socialTwitter, setSocialTwitter] = useState<string>(\"karataymarket\");\n\n  // Add/Remove pages\n  const addPage = () => setPages((prev) => prev + 1);\n  const removePage = () => {\n    if (pages > 1) {\n      setPages((prev) => prev - 1);\n      // Move products from the last page to the previous page\n      setProductPages((prev) => {\n        const updated = { ...prev };\n        Object.keys(updated).forEach((productId) => {\n          if (updated[parseInt(productId)] === pages) {\n            updated[parseInt(productId)] = pages - 1;\n          }\n        });\n        return updated;\n      });\n    }\n  };\n\n  // Initialize campaign settings when campaign prop changes\n  useEffect(() => {\n    if (campaign) {\n      setCampaignName(campaign.name || \"\");\n      setCampaignDescription(campaign.description || \"\");\n      setCompanyName(campaign.companyName || \"Your Company Name\");\n      setSelectedTemplateId(campaign.templateId || null);\n      setSelectedLogoId(campaign.logoId || null);\n      if (campaign.startDate) setStartDate(new Date(campaign.startDate));\n      if (campaign.endDate) setEndDate(new Date(campaign.endDate));\n    }\n  }, [campaign]);\n\n  // Get canvas dimensions based on Instagram format\n  const getCanvasDimensions = () => {\n    if (isDesignMode) {\n      return instagramFormat === \"4:5\"\n        ? { width: 540, height: 675 } // 1080/2 x 1350/2\n        : { width: 540, height: 540 }; // 1080/2 x 1080/2\n    } else {\n      return instagramFormat === \"4:5\"\n        ? { width: 400, height: 500 } // Scaled for preview\n        : { width: 400, height: 400 }; // Scaled for preview\n    }\n  };\n\n  // Calculate dynamic product size and layout based on product count per page\n  const calculateDynamicLayout = (\n    productCount: number,\n    canvasWidth: number,\n    canvasHeight: number\n  ) => {\n    const marginX = 40;\n    // Area between banner (top 120 + 44) and footer (80)\n    const gridTop = 120 + 44 + 16;\n    const gridBottomOffset = 80 + 16;\n    const marginY = gridTop; // starting y for products\n    const availableWidth = canvasWidth - 2 * marginX;\n    const availableHeight = canvasHeight - gridTop - gridBottomOffset;\n\n    let gridCols, gridRows, productSize;\n\n    if (productCount === 1) {\n      gridCols = 1;\n      gridRows = 1;\n      // Maximum size for single product to fully utilize space\n      productSize = Math.min(380, availableWidth * 0.9, availableHeight * 0.8);\n    } else if (productCount === 2) {\n      gridCols = 2;\n      gridRows = 1;\n      // Very large size for 2 products to fill most of the width\n      productSize = Math.min(300, (availableWidth - 20) / 2);\n    } else if (productCount === 3) {\n      gridCols = 3;\n      gridRows = 1;\n      // Large size for 3 products to fill the width completely\n      productSize = Math.min(240, (availableWidth - 40) / 3);\n    } else if (productCount === 4) {\n      gridCols = 2;\n      gridRows = 2;\n      // Large 2x2 grid filling most of the available space\n      productSize = Math.min(\n        220,\n        Math.min((availableWidth - 20) / 2, (availableHeight - 20) / 2)\n      );\n    } else if (productCount <= 6) {\n      gridCols = 3;\n      gridRows = 2;\n      // 3x2 grid with decent sizing\n      productSize = Math.min(\n        150,\n        Math.min((availableWidth - 60) / 3, (availableHeight - 30) / 2)\n      );\n    } else if (productCount <= 9) {\n      gridCols = 3;\n      gridRows = 3;\n      // 3x3 grid with moderate sizing\n      productSize = Math.min(\n        130,\n        Math.min((availableWidth - 60) / 3, (availableHeight - 60) / 3)\n      );\n    } else if (productCount <= 12) {\n      gridCols = 4;\n      gridRows = 3;\n      // 4x3 grid for better organization\n      productSize = Math.min(\n        110,\n        Math.min((availableWidth - 90) / 4, (availableHeight - 60) / 3)\n      );\n    } else {\n      gridCols = 4;\n      gridRows = Math.ceil(productCount / 4);\n      // Compact sizing for many products\n      productSize = Math.min(\n        100,\n        Math.min(\n          (availableWidth - 90) / 4,\n          (availableHeight - (gridRows - 1) * 20) / gridRows\n        )\n      );\n    }\n\n    return {\n      gridCols,\n      gridRows,\n      productSize: Math.max(90, productSize), // Higher minimum size constraint\n      availableWidth,\n      availableHeight,\n      marginX,\n      marginY,\n    };\n  };\n\n  // Adaptive grid geometry up to 9 items per page with deterministic 3x3 growth\n  const getAdaptiveGridGeometry = (\n    canvasWidth: number,\n    canvasHeight: number,\n    count: number\n  ) => {\n    const clampedCount = Math.max(1, Math.min(9, count));\n    const marginX = 40;\n    const gridTop = 120 + 44 + 16; // below banner\n    const gridBottomOffset = 80 + 16; // above footer\n    const areaX = marginX;\n    const areaY = gridTop;\n    const areaWidth = Math.max(0, canvasWidth - 2 * marginX);\n    const areaHeight = Math.max(0, canvasHeight - gridTop - gridBottomOffset);\n    const gap = 14;\n\n    // Determine rows per column based on desired sequence to reach 3x3\n    const rowsPerColumn: number[] = [1]; // start with 1 column, 1 row\n    if (clampedCount >= 2) rowsPerColumn.push(1); // 2 columns\n    if (clampedCount >= 3) rowsPerColumn[0] = 2; // split left column\n    if (clampedCount >= 4) rowsPerColumn[1] = 2; // split right column\n\n    let remaining = Math.max(0, clampedCount - Math.min(4, clampedCount));\n    // Phase A: grow first two columns up to 3 rows with pattern [0,0,1,1,0,1]\n    const pattern = [0, 0, 1, 1, 0, 1];\n    let pi = 0;\n    while (\n      remaining > 0 &&\n      rowsPerColumn.length >= 2 &&\n      (rowsPerColumn[0] < 3 || rowsPerColumn[1] < 3)\n    ) {\n      const target = pattern[pi % pattern.length];\n      if (rowsPerColumn[target] < 3) {\n        rowsPerColumn[target] += 1;\n        remaining -= 1;\n      }\n      pi += 1;\n    }\n\n    // Phase B: add third column and fill to 3\n    if (remaining > 0 && rowsPerColumn.length < 3) {\n      rowsPerColumn.push(1);\n      remaining -= 1;\n    }\n    while (remaining > 0 && rowsPerColumn.length >= 3 && rowsPerColumn[2] < 3) {\n      rowsPerColumn[2] += 1;\n      remaining -= 1;\n    }\n\n    // Clamp to max columns 3 and rows 3\n    const cols = Math.min(3, rowsPerColumn.length);\n    const finalRowsPerCol = rowsPerColumn\n      .slice(0, cols)\n      .map((r) => Math.min(3, r));\n\n    // Compute equal-width columns and equal-height rows within each column\n    const totalColGaps = gap * (cols - 1);\n    const colWidth = Math.floor((areaWidth - totalColGaps) / cols);\n    const startX =\n      areaX + Math.floor((areaWidth - (colWidth * cols + totalColGaps)) / 2);\n\n    type Cell = {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      innerWidth: number;\n      innerHeight: number;\n    };\n    const cells: Cell[] = [];\n    for (let c = 0; c < cols; c++) {\n      const colX = startX + c * (colWidth + gap);\n      const rowsInCol = finalRowsPerCol[c];\n      const totalRowGaps = gap * (rowsInCol - 1);\n      const rowHeight = Math.floor((areaHeight - totalRowGaps) / rowsInCol);\n      const colStartY =\n        areaY +\n        Math.floor((areaHeight - (rowHeight * rowsInCol + totalRowGaps)) / 2);\n      for (let r = 0; r < rowsInCol; r++) {\n        const cellX = colX;\n        const cellY = colStartY + r * (rowHeight + gap);\n        const width = Math.max(60, colWidth);\n        const height = Math.max(60, rowHeight);\n        const innerPad = 4;\n        cells.push({\n          x: cellX,\n          y: cellY,\n          width,\n          height,\n          innerWidth: Math.max(40, width - innerPad * 2),\n          innerHeight: Math.max(40, height - innerPad * 2),\n        });\n      }\n    }\n\n    return { cells, gap };\n  };\n\n  // Initialize product positions when selectedProducts change\n  useEffect(() => {\n    try {\n      const newPositions: Record<number, { x: number; y: number }> = {};\n      const newScales: Record<number, { scaleX: number; scaleY: number }> = {};\n      const newPages: Record<number, number> = {};\n      const newGridIndex: Record<number, number> = {};\n\n      selectedProducts.forEach((item, index) => {\n        if (!productPositions[item.id]) {\n          // Use saved position if available, otherwise arrange in a dynamic grid\n          if (\n            item.positionX !== undefined &&\n            item.positionY !== undefined &&\n            item.positionX !== null &&\n            item.positionY !== null &&\n            (item.positionX !== 0 || item.positionY !== 0)\n          ) {\n            newPositions[item.id] = {\n              x: item.positionX,\n              y: item.positionY,\n            };\n          } else {\n            // Place into adaptive grid by order within page\n            const pageNumber = item.pageNumber || 1;\n            const pageProducts = selectedProducts.filter(\n              (p) => (p.pageNumber || 1) === pageNumber\n            );\n            const indexInPage = pageProducts.findIndex((p) => p.id === item.id);\n            const canvasDims = getCanvasDimensions();\n            const grid = getAdaptiveGridGeometry(\n              canvasDims.width,\n              canvasDims.height,\n              pageProducts.length\n            );\n            const cellIndex = Math.min(indexInPage, grid.cells.length - 1);\n            newGridIndex[item.id] = cellIndex;\n            newPositions[item.id] = {\n              x: grid.cells[cellIndex].x,\n              y: grid.cells[cellIndex].y,\n            };\n          }\n        } else {\n          newPositions[item.id] = productPositions[item.id];\n        }\n\n        // Initialize scales and pages\n        if (!productScales[item.id]) {\n          newScales[item.id] = {\n            scaleX: item.scaleX || DEFAULT_PRODUCT_SCALE,\n            scaleY: item.scaleY || DEFAULT_PRODUCT_SCALE,\n          };\n        }\n\n        if (!productPages[item.id]) {\n          newPages[item.id] = item.pageNumber || 1;\n        }\n      });\n\n      setProductPositions((prev) => ({ ...prev, ...newPositions }));\n      setProductScales((prev) => ({ ...prev, ...newScales }));\n      setProductPages((prev) => ({ ...prev, ...newPages }));\n      if (Object.keys(newGridIndex).length > 0) {\n        setProductGridIndex((prev) => ({ ...prev, ...newGridIndex }));\n      }\n    } catch (error) {\n      console.error(\"Error initializing product positions:\", error);\n    }\n  }, [selectedProducts]);\n\n  // Set initial pages when in design mode and apply auto layout\n  useEffect(() => {\n    if (isDesignMode && initialPages > 0) {\n      setPages(initialPages);\n      // FIXED: Auto-apply layout when entering design mode\n      if (selectedProducts.length > 0) {\n        setTimeout(() => handleAutoLayout(), 100);\n      }\n    }\n  }, [isDesignMode, initialPages]);\n\n  // Re-apply smart layout when product list or page count changes\n  useEffect(() => {\n    if (selectedProducts.length > 0) {\n      const id = setTimeout(() => handleAutoLayout(), 50);\n      return () => clearTimeout(id);\n    }\n  }, [selectedProducts.length, pages]);\n\n  // Initialize default date positions for each page\n  useEffect(() => {\n    const newDatePositions: Record<number, { x: number; y: number }> = {};\n    for (let i = 1; i <= pages; i++) {\n      if (!datePositions[i]) {\n        newDatePositions[i] = { x: 320, y: 20 }; // Default position: top-right area\n      }\n    }\n    if (Object.keys(newDatePositions).length > 0) {\n      setDatePositions((prev) => ({ ...prev, ...newDatePositions }));\n    }\n  }, [pages]);\n\n  const { data: templates = [] } = useQuery<Template[]>({\n    queryKey: [\"/api/templates\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/templates?userId=${user.id}`);\n      if (!response.ok) throw new Error(\"Failed to fetch templates\");\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const { data: logos = [] } = useQuery<Logo[]>({\n    queryKey: [\"/api/logos\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return [];\n      const response = await fetch(`/api/logos?userId=${user.id}`);\n      if (!response.ok) throw new Error(\"Failed to fetch logos\");\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const { data: activeLogo } = useQuery<Logo | null>({\n    queryKey: [\"/api/logos/active\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n      const response = await fetch(`/api/logos/active?userId=${user.id}`);\n      if (!response.ok) return null;\n      return response.json();\n    },\n    enabled: !!user?.id,\n  });\n\n  const selectedTemplate = templates?.find((t) => t.id === selectedTemplateId);\n  const selectedLogo =\n    logos?.find((l) => l.id === selectedLogoId) || activeLogo;\n\n  const handleTemplateSelect = (value: string) => {\n    try {\n      const templateId = parseInt(value);\n      setSelectedTemplateId(templateId);\n    } catch (error) {\n      console.error(\"Error selecting template:\", error);\n    }\n  };\n\n  const handleLogoSelect = (value: string) => {\n    try {\n      const logoId = parseInt(value);\n      setSelectedLogoId(logoId);\n    } catch (error) {\n      console.error(\"Error selecting logo:\", error);\n    }\n  };\n\n  const handleMouseDown = (elementType: string, e: React.MouseEvent) => {\n    e.preventDefault();\n    setDraggedElement(elementType);\n    setDraggedProductId(null);\n  };\n\n  const handleProductMouseDown = (productId: number, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDraggedProductId(productId);\n    setDraggedElement(null);\n    setRotatingProductId(null);\n  };\n\n  const handleProductRotateStart = (productId: number, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setRotatingProductId(productId);\n    setDraggedProductId(null);\n    setDraggedElement(null);\n    setResizingProductId(null);\n\n    // Calculate initial angle from product center\n    if (canvasRef.current) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const productPos = productPositions[productId] || { x: 0, y: 0 };\n      const centerX = productPos.x + 66; // Half of product width (132px)\n      const centerY = productPos.y + 66; // Half of product height (132px)\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      const angle =\n        Math.atan2(mouseY - centerY, mouseX - centerX) * (180 / Math.PI);\n      setLastMouseAngle(angle);\n    }\n  };\n\n  // Logo rotate/resize start handlers\n  const handleLogoRotateStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsRotatingLogo(true);\n    setDraggedElement(null);\n    setResizingProductId(null);\n    setRotatingProductId(null);\n    // Calculate initial angle from logo center\n    if (canvasRef.current) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const centerX = elementPositions.logo.x + 32; // base size 64\n      const centerY = elementPositions.logo.y + 32;\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      const angle =\n        Math.atan2(mouseY - centerY, mouseX - centerX) * (180 / Math.PI);\n      setLastMouseAngle(angle);\n    }\n  };\n\n  const handleLogoResizeStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizingLogo(true);\n    setDraggedElement(null);\n    setResizingProductId(null);\n    setRotatingProductId(null);\n    setInitialLogoResize({\n      startX: e.clientX,\n      startY: e.clientY,\n      startScale: logoScale,\n    });\n  };\n\n  const handleProductResizeStart = (productId: number, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setResizingProductId(productId);\n    setDraggedProductId(null);\n    setDraggedElement(null);\n    setRotatingProductId(null);\n\n    // Store initial resize state\n    const currentScale = productScales[productId] || { scaleX: DEFAULT_PRODUCT_SCALE, scaleY: DEFAULT_PRODUCT_SCALE };\n    setInitialResizeState({\n      startX: e.clientX,\n      startY: e.clientY,\n      startScale: currentScale,\n    });\n  };\n\n  const moveProductToPage = (productId: number, targetPage: number) => {\n    setProductPages((prev) => ({\n      ...prev,\n      [productId]: targetPage,\n    }));\n  };\n\n  // Automatically distribute products up to 9 per page\n  const distributeProductsAcrossPages = (numPages: number) => {\n    const newPages: Record<number, number> = {};\n    selectedProducts.forEach((item, index) => {\n      const targetPage = Math.floor(index / 9) + 1; // 9 per page\n      newPages[item.id] = Math.min(targetPage, numPages);\n    });\n    setProductPages(newPages);\n  };\n\n  // Handle page changes and redistribute products\n  const handlePagesChange = (newPageCount: number) => {\n    setPages(newPageCount);\n    if (selectedProducts.length > 0) {\n      distributeProductsAcrossPages(newPageCount);\n    }\n  };\n\n  // Ensure enough pages for 9 per page when product list changes\n  useEffect(() => {\n    const requiredPages = Math.max(1, Math.ceil(selectedProducts.length / 9));\n    if (requiredPages !== pages) {\n      setPages(requiredPages);\n      distributeProductsAcrossPages(requiredPages);\n    }\n  }, [selectedProducts.length]);\n\n  const handleMouseMove = (e: React.MouseEvent, pageNumber?: number) => {\n    const currentCanvas = e.currentTarget as HTMLDivElement;\n    if (!currentCanvas) return;\n\n    const rect = currentCanvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if (draggedElement) {\n      setElementPositions((prev) => ({\n        ...prev,\n        [draggedElement]: { x: Math.max(0, x - 25), y: Math.max(0, y - 25) },\n      }));\n    }\n\n    if (isDraggingDate && dateDragStart && pageNumber) {\n      setDatePositions((prev) => ({\n        ...prev,\n        [pageNumber]: {\n          x: Math.max(0, Math.min(x - dateDragStart.x, rect.width - 120)),\n          y: Math.max(0, Math.min(y - dateDragStart.y, rect.height - 30)),\n        },\n      }));\n    }\n\n    if (draggedProductId) {\n      // FIXED: Dynamic boundary constraints based on actual canvas size\n      const canvasWidth = rect.width;\n      const canvasHeight = rect.height;\n      const productSize = 132; // Product element size including text area\n\n      setProductPositions((prev) => ({\n        ...prev,\n        [draggedProductId]: {\n          x: Math.max(0, Math.min(x - 66, canvasWidth - productSize)),\n          y: Math.max(0, Math.min(y - 66, canvasHeight - productSize)),\n        },\n      }));\n    }\n\n    if (isRotatingLogo) {\n      const centerX = elementPositions.logo.x + 32;\n      const centerY = elementPositions.logo.y + 32;\n      const currentAngle =\n        Math.atan2(y - centerY, x - centerX) * (180 / Math.PI);\n      const angleDifference = currentAngle - lastMouseAngle;\n      setLogoRotation((prev) => prev + angleDifference);\n      setLastMouseAngle(currentAngle);\n    }\n\n    if (rotatingProductId) {\n      const productPos = productPositions[rotatingProductId] || { x: 0, y: 0 };\n      const centerX = productPos.x + 66; // Half of product width\n      const centerY = productPos.y + 66; // Half of product height\n      const currentAngle =\n        Math.atan2(y - centerY, x - centerX) * (180 / Math.PI);\n      const angleDifference = currentAngle - lastMouseAngle;\n\n      setProductRotations((prev) => ({\n        ...prev,\n        [rotatingProductId]: (prev[rotatingProductId] || 0) + angleDifference,\n      }));\n\n      setLastMouseAngle(currentAngle);\n    }\n\n    if (isResizingLogo && initialLogoResize) {\n      const deltaX = e.clientX - initialLogoResize.startX;\n      const deltaY = e.clientY - initialLogoResize.startY;\n      const avgDelta = (deltaX + deltaY) / 2;\n      const scaleFactor = Math.max(\n        0.2,\n        initialLogoResize.startScale + avgDelta / 150\n      );\n      setLogoScale(scaleFactor);\n    }\n\n    if (resizingProductId && initialResizeState) {\n      const deltaX = e.clientX - initialResizeState.startX;\n      const deltaY = e.clientY - initialResizeState.startY;\n\n      // FIXED: Bidirectional resizing - support both growing and shrinking\n      const avgDelta = (deltaX + deltaY) / 2;\n      const scaleFactor = Math.max(\n        0.1,\n        initialResizeState.startScale.scaleX + avgDelta / 150\n      );\n\n      setProductScales((prev) => ({\n        ...prev,\n        [resizingProductId]: {\n          scaleX: scaleFactor,\n          scaleY: scaleFactor,\n        },\n      }));\n    }\n  };\n\n  const handleMouseUp = () => {\n    // Save/Snap product position when dragging ends\n    if (\n      draggedProductId &&\n      onProductPositionUpdate &&\n      productPositions[draggedProductId]\n    ) {\n      const position = productPositions[draggedProductId];\n      // Snap to nearest grid cell\n      const canvasDims = getCanvasDimensions();\n      const currentPage = productPages[draggedProductId] || 1;\n      const pageProducts = selectedProducts.filter(\n        (p) => (productPages[p.id] || 1) === currentPage\n      );\n      const grid = getAdaptiveGridGeometry(\n        canvasDims.width,\n        canvasDims.height,\n        pageProducts.length\n      );\n      let nearestIndex = 0;\n      let nearestDist = Number.MAX_VALUE;\n      grid.cells.forEach((cell, idx) => {\n        const dx = position.x - cell.x;\n        const dy = position.y - cell.y;\n        const d = dx * dx + dy * dy;\n        if (d < nearestDist) {\n          nearestDist = d;\n          nearestIndex = idx;\n        }\n      });\n      // Handle swap if cell is occupied on same page\n      const occupant = selectedProducts.find(\n        (p) =>\n          (productPages[p.id] || 1) === currentPage &&\n          productGridIndex[p.id] === nearestIndex\n      );\n      const prevIndex = productGridIndex[draggedProductId];\n      setProductGridIndex((prev) => ({\n        ...prev,\n        [draggedProductId]: nearestIndex,\n        ...(occupant ? { [occupant.id]: prevIndex } : {}),\n      }));\n      setProductPositions((prev) => ({\n        ...prev,\n        [draggedProductId]: {\n          x: grid.cells[nearestIndex].x,\n          y: grid.cells[nearestIndex].y,\n        },\n        ...(occupant\n          ? {\n              [occupant.id]:\n                prevIndex != null\n                  ? { x: grid.cells[prevIndex].x, y: grid.cells[prevIndex].y }\n                  : prev[occupant.id],\n            }\n          : {}),\n      }));\n      onProductPositionUpdate(\n        draggedProductId,\n        grid.cells[nearestIndex].x,\n        grid.cells[nearestIndex].y\n      );\n    }\n\n    setDraggedElement(null);\n    setDraggedProductId(null);\n    setRotatingProductId(null);\n    setResizingProductId(null);\n    setInitialResizeState(null);\n    setIsDraggingDate(null);\n    setDateDragStart(null);\n    setIsRotatingLogo(false);\n    setIsResizingLogo(false);\n    setInitialLogoResize(null);\n  };\n\n  const handleCreateCampaign = () => {\n    if (selectedProducts.length === 0) {\n      toast({\n        title: \"No products selected\",\n        description:\n          \"Please add some products to your brochure before creating a campaign.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    setIsCreateCampaignOpen(true);\n  };\n\n  // Enhanced Auto Layout with precise dynamic sizing and positioning\n  const handleAutoLayout = () => {\n    const newPositions: Record<number, { x: number; y: number }> = {};\n    const newScales: Record<number, { scaleX: number; scaleY: number }> = {};\n\n    // Group products by their current page assignments\n    const productsByPage: Record<number, any[]> = {};\n    selectedProducts.forEach((item) => {\n      const pageNumber = productPages[item.id] || 1;\n      if (!productsByPage[pageNumber]) {\n        productsByPage[pageNumber] = [];\n      }\n      productsByPage[pageNumber].push(item);\n    });\n\n    // Arrange products within each page with precise dynamic layout\n    Object.entries(productsByPage).forEach(([pageNum, products]) => {\n      const pageNumber = parseInt(pageNum);\n      const itemsInPage = products.length;\n      const canvasDims = getCanvasDimensions();\n      const canvasWidth = canvasDims.width;\n      const canvasHeight = canvasDims.height;\n\n      const layout = calculateDynamicLayout(\n        itemsInPage,\n        canvasWidth,\n        canvasHeight\n      );\n\n      products.forEach((item, indexInPage) => {\n        const col = indexInPage % layout.gridCols;\n        const row = Math.floor(indexInPage / layout.gridCols);\n\n        // Calculate precise positioning with balanced gaps\n        const minGap = 20; // Minimum gap between products\n        const gapX =\n          layout.gridCols > 1\n            ? Math.max(\n                minGap,\n                (layout.availableWidth - layout.gridCols * layout.productSize) /\n                  (layout.gridCols - 1)\n              )\n            : 0;\n        const gapY =\n          layout.gridRows > 1\n            ? Math.max(\n                minGap,\n                (layout.availableHeight -\n                  layout.gridRows * layout.productSize) /\n                  (layout.gridRows - 1)\n              )\n            : 0;\n\n        const actualSpaceX = layout.productSize + gapX;\n        const actualSpaceY = layout.productSize + gapY;\n\n        // Center the grid for optimal visual balance\n        const actualRowsUsed = Math.ceil(itemsInPage / layout.gridCols);\n        const totalGridWidth =\n          (layout.gridCols - 1) * actualSpaceX + layout.productSize;\n        const totalGridHeight =\n          (actualRowsUsed - 1) * actualSpaceY + layout.productSize;\n        const offsetX = (layout.availableWidth - totalGridWidth) / 2;\n        const offsetY = (layout.availableHeight - totalGridHeight) / 2;\n\n        newPositions[item.id] = {\n          x: layout.marginX + offsetX + col * actualSpaceX,\n          y: layout.marginY + offsetY + row * actualSpaceY,\n        };\n\n        // Reset scaling to default\n        newScales[item.id] = { scaleX: DEFAULT_PRODUCT_SCALE, scaleY: DEFAULT_PRODUCT_SCALE };\n      });\n    });\n\n    setProductPositions(newPositions);\n    setProductScales(newScales);\n\n    toast({\n      title: \"Smart Layout Applied\",\n      description:\n        \"Products automatically arranged with optimal sizing and spacing for perfect visual balance.\",\n    });\n  };\n\n  const handleSaveCampaign = async () => {\n    if (!campaignName.trim()) {\n      toast({\n        title: \"Campaign name required\",\n        description: \"Please enter a name for your campaign.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      // FIXED: Handle multiple pages by using the first available template\n      const firstAvailableTemplateId =\n        pageTemplates && Object.keys(pageTemplates).length > 0\n          ? Object.values(pageTemplates).find((id) => id !== null)\n          : selectedTemplateId;\n\n      // First create the campaign\n      const campaignData = {\n        name: campaignName,\n        description: campaignDescription || null,\n        status: \"active\",\n        companyName: companyName,\n        userId: user?.id,\n        startDate: startDate?.toISOString() || null,\n        endDate: endDate?.toISOString() || null,\n        templateId: firstAvailableTemplateId,\n        logoId: selectedLogoId,\n        pageCount: pages, // Include page count\n      };\n\n      const response = await fetch(\"/api/campaigns\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(campaignData),\n      });\n\n      if (!response.ok) throw new Error(\"Campaign creation failed\");\n\n      const newCampaign = await response.json();\n\n      // FIXED: Save all campaign products with their positions AND page assignments\n      for (const product of selectedProducts) {\n        const position = productPositions[product.id] || { x: 0, y: 0 };\n        const pageNumber = productPages[product.id] || 1;\n        const scale = productScales[product.id] || { scaleX: DEFAULT_PRODUCT_SCALE, scaleY: DEFAULT_PRODUCT_SCALE };\n        const rotation = productRotations[product.id] || 0;\n\n        const campaignProductData = {\n          campaignId: newCampaign.id,\n          productId: product.product.id,\n          quantity: product.quantity,\n          discountPercent: product.discountPercent,\n          newPrice: product.newPrice,\n          positionX: position.x,\n          positionY: position.y,\n          pageNumber: pageNumber,\n          scaleX: scale.scaleX,\n          scaleY: scale.scaleY,\n          rotation: rotation,\n        };\n\n        await fetch(`/api/campaigns/${newCampaign.id}/products`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(campaignProductData),\n        });\n      }\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/campaigns\"] });\n      toast({\n        title: \"Campaign created successfully\",\n        description: \"Your campaign has been saved with all product positions.\",\n      });\n      setIsCreateCampaignOpen(false);\n      setLocation(\"/dashboard\");\n    } catch (error) {\n      toast({\n        title: \"Campaign creation failed\",\n        description: \"There was an error creating your campaign.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDownload = async (format: string) => {\n    if (format === \"pdf\") {\n      toast({\n        title: \"PDF Download\",\n        description:\n          \"PDF generation will be implemented with a proper PDF library.\",\n      });\n      setIsDownloadOpen(false);\n      return;\n    }\n\n    try {\n      // FIXED: Multi-page download functionality\n      const pageElements = document.querySelectorAll(\"[data-page-canvas]\");\n\n      if (pageElements.length === 0) {\n        toast({\n          title: \"Download failed\",\n          description: \"No pages found to download.\",\n          variant: \"destructive\",\n        });\n        setIsDownloadOpen(false);\n        return;\n      }\n\n      // Hide all edit controls before capturing\n      setDropTargetPage(null);\n      const editControls = document.querySelectorAll(\n        '[data-edit-control=\"true\"]'\n      );\n      const originalVisibility = Array.from(editControls).map(\n        (el) => (el as HTMLElement).style.visibility\n      );\n      editControls.forEach(\n        (el) => ((el as HTMLElement).style.visibility = \"hidden\")\n      );\n\n      const html2canvas = await import(\"html2canvas\");\n\n      // Allow multiple frames for layout to fully settle and fonts to load\n      await new Promise((resolve) => setTimeout(resolve, 200));\n      await new Promise((resolve) => requestAnimationFrame(resolve));\n      await new Promise((resolve) => requestAnimationFrame(resolve));\n\n      const getTargetDimensions = () =>\n        instagramFormat === \"4:5\"\n          ? { width: 1080, height: 1350 }\n          : { width: 1080, height: 1080 };\n\n      const captureCanvas = async (element: HTMLElement) => {\n        const rect = element.getBoundingClientRect();\n        const { width: targetWidth, height: targetHeight } =\n          getTargetDimensions();\n\n        // Calculate scale factors for each dimension to maintain exact aspect ratio\n        const scaleX = targetWidth / rect.width;\n        const scaleY = targetHeight / rect.height;\n\n        const renderedCanvas = await html2canvas.default(element, {\n          scale: 2,\n          width: rect.width,\n          height: rect.height,\n          useCORS: true,\n          allowTaint: true,\n          backgroundColor: null,\n          logging: false,\n        });\n\n        // Create final output canvas with exact target dimensions\n        const outputCanvas = document.createElement(\"canvas\");\n        outputCanvas.width = targetWidth;\n        outputCanvas.height = targetHeight;\n        const ctx = outputCanvas.getContext(\"2d\");\n        if (ctx) {\n          // Fill with transparent background\n          ctx.clearRect(0, 0, targetWidth, targetHeight);\n          // Draw the captured content scaled to exact target dimensions\n          ctx.drawImage(\n            renderedCanvas,\n            0,\n            0,\n            renderedCanvas.width,\n            renderedCanvas.height,\n            0,\n            0,\n            targetWidth,\n            targetHeight\n          );\n        }\n\n        return outputCanvas;\n      };\n\n      if (pageElements.length === 1) {\n        const element = pageElements[0] as HTMLElement;\n        const finalCanvas = await captureCanvas(element);\n        const link = document.createElement(\"a\");\n        link.download = `brochure.${format}`;\n        link.href = finalCanvas.toDataURL(`image/${format}`, 0.95);\n        link.click();\n      } else {\n        const JSZip = (await import(\"jszip\")).default;\n        const zip = new JSZip();\n\n        for (let i = 0; i < pageElements.length; i++) {\n          const element = pageElements[i] as HTMLElement;\n          const finalCanvas = await captureCanvas(element);\n          const dataUrl = finalCanvas.toDataURL(`image/${format}`, 0.95);\n          const base64Data = dataUrl.split(\",\")[1];\n          zip.file(`page-${i + 1}.${format}`, base64Data, { base64: true });\n        }\n\n        const zipBlob = await zip.generateAsync({ type: \"blob\" });\n        const link = document.createElement(\"a\");\n        link.download = `brochure-pages.zip`;\n        link.href = URL.createObjectURL(zipBlob);\n        link.click();\n        URL.revokeObjectURL(link.href);\n      }\n\n      // Restore edit controls\n      editControls.forEach((el, index) => {\n        (el as HTMLElement).style.visibility = originalVisibility[index];\n      });\n\n      toast({\n        title: \"Download successful\",\n        description:\n          pageElements.length > 1\n            ? `Downloaded ${pageElements.length} pages as ZIP file.`\n            : \"Downloaded brochure successfully.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Download failed\",\n        description: \"Could not generate image. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n\n    setIsDownloadOpen(false);\n  };\n\n  const formatDateRange = () => {\n    if (!startDate && !endDate) return \"Select dates\";\n    if (startDate && !endDate)\n      return `From ${format(startDate, \"MMM dd, yyyy\")}`;\n    if (!startDate && endDate)\n      return `Until ${format(endDate, \"MMM dd, yyyy\")}`;\n    return `${format(startDate!, \"MMM dd\")} - ${format(\n      endDate!,\n      \"MMM dd, yyyy\"\n    )}`;\n  };\n\n  // helper to convert hex to rgb\n  const hexToRgb = (hex: string) => {\n    const clean = hex.replace(\"#\", \"\");\n    const bigint = parseInt(\n      clean.length === 3\n        ? clean\n            .split(\"\")\n            .map((c) => c + c)\n            .join(\"\")\n        : clean,\n      16\n    );\n    const r = (bigint >> 16) & 255;\n    const g = (bigint >> 8) & 255;\n    const b = bigint & 255;\n    return { r, g, b };\n  };\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Brochure Designer\n          </h2>\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\" size=\"sm\" onClick={handleAutoLayout}>\n              <Maximize2 className=\"w-4 h-4 mr-2\" />\n              Auto Layout\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setIsDownloadOpen(true)}\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              Download\n            </Button>\n            <Button size=\"sm\" onClick={handleCreateCampaign}>\n              <Save className=\"w-4 h-4 mr-2\" />\n              Create Campaign\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 p-6 overflow-y-auto\">\n        {/* FIXED: Date selector moved outside design area */}\n        <div className=\"mb-6 space-y-4\">\n          {/* Instagram Format Selection */}\n          <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n              Instagram Format\n            </h3>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => setInstagramFormat(\"4:5\")}\n                className={cn(\n                  \"p-3 rounded-lg border-2 transition-all\",\n                  instagramFormat === \"4:5\"\n                    ? \"border-blue-500 bg-blue-50\"\n                    : \"border-gray-300 hover:border-gray-400\"\n                )}\n              >\n                <div className=\"text-sm font-medium text-gray-700 mb-1\">\n                  4:5 (Dikey)\n                </div>\n                <div className=\"text-xs text-gray-500\">1080x1350 px</div>\n              </button>\n              <button\n                onClick={() => setInstagramFormat(\"1:1\")}\n                className={cn(\n                  \"p-3 rounded-lg border-2 transition-all\",\n                  instagramFormat === \"1:1\"\n                    ? \"border-blue-500 bg-blue-50\"\n                    : \"border-gray-300 hover:border-gray-400\"\n                )}\n              >\n                <div className=\"text-sm font-medium text-gray-700 mb-1\">\n                  1:1 (Kare)\n                </div>\n                <div className=\"text-xs text-gray-500\">1080x1080 px</div>\n              </button>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n              Campaign Dates\n            </h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                  Start Date\n                </label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !startDate && \"text-muted-foreground\"\n                      )}\n                    >\n                      <CalendarIcon className=\"mr-2 h-3 w-3\" />\n                      {startDate\n                        ? format(startDate, \"MMM dd, yyyy\")\n                        : \"Pick a date\"}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={startDate}\n                      onSelect={setStartDate}\n                      initialFocus\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                  End Date\n                </label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !endDate && \"text-muted-foreground\"\n                      )}\n                    >\n                      <CalendarIcon className=\"mr-2 h-3 w-3\" />\n                      {endDate\n                        ? format(endDate, \"MMM dd, yyyy\")\n                        : \"Pick a date\"}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={endDate}\n                      onSelect={setEndDate}\n                      initialFocus\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n            </div>\n          </div>\n\n          {/* removed old header/style controls now moved to right sidebar */}\n        </div>\n\n        {/* Page Management - Only show if not in design mode */}\n        {!isDesignMode && (\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Pages ({pages})\n              </h3>\n              <div className=\"flex items-center space-x-2\">\n                <Select\n                  value={pages.toString()}\n                  onValueChange={(value) => handlePagesChange(parseInt(value))}\n                >\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {[1, 2, 3, 4, 5, 6].map((num) => (\n                      <SelectItem key={num} value={num.toString()}>\n                        {num} Page{num > 1 ? \"s\" : \"\"}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => distributeProductsAcrossPages(pages)}\n                  className=\"flex items-center space-x-1\"\n                  disabled={selectedProducts.length === 0}\n                >\n                  <span>Redistribute</span>\n                </Button>\n              </div>\n            </div>\n            {selectedProducts.length > 0 && (\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Tip: Use the dropdown to change page count and automatically\n                redistribute products, or drag products between pages manually.\n              </p>\n            )}\n          </div>\n        )}\n\n        {/* Multi-Page Brochure Canvas */}\n        <div className={isDesignMode ? \"flex gap-6 items-start\" : \"space-y-8\"}>\n          {/* Left Sidebar Controls (Design Mode) */}\n          {isDesignMode && (\n            <div className=\"w-64 shrink-0\">\n              <div className=\"sticky top-4 border rounded-lg p-4 bg-white shadow-sm space-y-4\">\n                <h4 className=\"text-sm font-semibold text-gray-900\">Content</h4>\n                {/* Brand & Banner */}\n                <div className=\"border rounded-lg p-3\">\n                  <h5 className=\"text-xs font-semibold text-gray-700 mb-2\">\n                    Brand & Banner\n                  </h5>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                    Market Name\n                  </label>\n                  <div className=\"flex items-end gap-2 mb-3\">\n                    <Input\n                      value={companyName}\n                      onChange={(e) => setCompanyName(e.target.value)}\n                      placeholder=\"Karatay Market\"\n                    />\n                    <button\n                      className={`px-3 py-2 rounded-md text-sm border ${\n                        showCompanyName\n                          ? \"bg-green-50 border-green-200 text-green-700\"\n                          : \"bg-white border-gray-200\"\n                      }`}\n                      onClick={() => setShowCompanyName((s) => !s)}\n                    >\n                      {showCompanyName ? \"Visible\" : \"Hidden\"}\n                    </button>\n                  </div>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                    Logo\n                  </label>\n                  <div className=\"flex items-center gap-2 mb-3\">\n                    <Select\n                      value={(selectedLogoId ?? \"\").toString()}\n                      onValueChange={handleLogoSelect}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Choose logo\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {logos?.map((l) => (\n                          <SelectItem key={l.id} value={l.id.toString()}>\n                            {l.name}\n                          </SelectItem>\n                        ))}\n                        <SelectItem value={\"-1\"}>Hide Logo</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setIsLogoSelectOpen(true)}\n                    >\n                      Upload\n                    </Button>\n                  </div>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                    Banner Text\n                  </label>\n                  <Input\n                    value={bannerText}\n                    onChange={(e) => setBannerText(e.target.value)}\n                  />\n                </div>\n                {/* Header right phone block */}\n                <div className=\"border rounded-lg p-3\">\n                  <h5 className=\"text-xs font-semibold text-gray-700 mb-2\">\n                    Header Phone Area\n                  </h5>\n                  <label className=\"block text-xs text-gray-600 mb-1\">\n                    Text\n                  </label>\n                  <Input\n                    value={headerPhoneText}\n                    onChange={(e) => setHeaderPhoneText(e.target.value)}\n                  />\n                  <label className=\"block text-xs text-gray-600 mt-2 mb-1\">\n                    Phone Number\n                  </label>\n                  <Input\n                    value={headerPhoneNumber}\n                    onChange={(e) => setHeaderPhoneNumber(e.target.value)}\n                  />\n                </div>\n                {/* Footer content settings */}\n                <div className=\"border rounded-lg p-3\">\n                  <h5 className=\"text-xs font-semibold text-gray-700 mb-2\">\n                    Footer Content\n                  </h5>\n                  <label className=\"block text-xs text-gray-600 mb-1\">\n                    Address (left)\n                  </label>\n                  <Input\n                    value={footerAddress}\n                    onChange={(e) => setFooterAddress(e.target.value)}\n                  />\n                  <div className=\"grid grid-cols-1 gap-2 mt-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">\n                        Instagram\n                      </label>\n                      <Input\n                        value={socialInstagram}\n                        onChange={(e) => setSocialInstagram(e.target.value)}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">\n                        Facebook\n                      </label>\n                      <Input\n                        value={socialFacebook}\n                        onChange={(e) => setSocialFacebook(e.target.value)}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">\n                        Twitter/X\n                      </label>\n                      <Input\n                        value={socialTwitter}\n                        onChange={(e) => setSocialTwitter(e.target.value)}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Canvases */}\n          <div\n            className={\n              isDesignMode ? \"flex space-x-6 overflow-x-auto pb-4\" : \"space-y-8\"\n            }\n          >\n            {Array.from({ length: pages }, (_, pageIndex) => {\n              const pageNumber = pageIndex + 1;\n              const pageProducts = selectedProducts\n                .map((p, idx) => ({ p, idx }))\n                .filter(({ p }) => (productPages[p.id] || 1) === pageNumber)\n                .slice(0, 9)\n                .map(({ p }) => p);\n\n              return (\n                <div\n                  key={pageNumber}\n                  className={`relative ${isDesignMode ? \"flex-shrink-0\" : \"\"}`}\n                >\n                  <div\n                    className={`flex items-center mb-2 ${\n                      isDesignMode ? \"justify-center\" : \"\"\n                    }`}\n                  >\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      Page {pageNumber}\n                    </span>\n                    <span className=\"ml-2 text-xs text-gray-500\">\n                      ({pageProducts.length} products)\n                    </span>\n                  </div>\n\n                  <div\n                    ref={pageNumber === 1 ? canvasRef : undefined}\n                    data-page-canvas={pageNumber}\n                    className={cn(\n                      \"drag-drop-area relative mx-auto transition-colors overflow-visible\",\n                      dropTargetPage === pageNumber\n                        ? \"border-blue-400 bg-blue-50\"\n                        : \"border-gray-300\"\n                    )}\n                    style={{\n                      borderRadius: \"20px\",\n                      width: isDesignMode\n                        ? instagramFormat === \"4:5\"\n                          ? \"540px\" // 1080/2 for display\n                          : \"540px\" // 1080/2 for display\n                        : instagramFormat === \"4:5\"\n                        ? \"400px\" // Scaled down for preview\n                        : \"400px\", // Scaled down for preview\n                      height: isDesignMode\n                        ? instagramFormat === \"4:5\"\n                          ? \"675px\" // 1350/2 for display\n                          : \"540px\" // 1080/2 for display\n                        : instagramFormat === \"4:5\"\n                        ? \"500px\" // Scaled down for preview\n                        : \"400px\", // Scaled down for preview\n                      backgroundImage: (() => {\n                        try {\n                          // FIXED: Use page-specific template if available in design mode\n                          const pageTemplateId = pageTemplates?.[pageNumber];\n                          if (\n                            pageTemplateId &&\n                            templates &&\n                            templates.length > 0\n                          ) {\n                            const pageTemplate = templates.find(\n                              (t) => t.id === pageTemplateId\n                            );\n                            if (pageTemplate && pageTemplate.filePath) {\n                              return `url(/uploads/${pageTemplate.filePath})`;\n                            }\n                          }\n                          // Fallback to global selected template or default background\n                          if (selectedTemplate && selectedTemplate.filePath) {\n                            return `url(/uploads/${selectedTemplate.filePath})`;\n                          }\n                          // Default background color\n                          return `linear-gradient(0deg, ${DEFAULT_BACKGROUND_COLOR}, ${DEFAULT_BACKGROUND_COLOR})`;\n                        } catch (error) {\n                          console.error(\"Error loading template:\", error);\n                          return `linear-gradient(0deg, ${DEFAULT_BACKGROUND_COLOR}, ${DEFAULT_BACKGROUND_COLOR})`;\n                        }\n                      })(),\n                      backgroundSize: \"cover\",\n                      backgroundPosition: \"center\",\n                      backgroundRepeat: \"no-repeat\",\n                    }}\n                    onMouseMove={(e) => handleMouseMove(e, pageNumber)}\n                    onMouseUp={handleMouseUp}\n                    onMouseLeave={handleMouseUp}\n                    onClick={() => {\n                      setIsLogoSelected(false);\n                      setSelectedProductIdForControls(null);\n                    }}\n                    onDragOver={(e) => {\n                      e.preventDefault();\n                      setDropTargetPage(pageNumber);\n                    }}\n                    onDragLeave={() => setDropTargetPage(null)}\n                    onDrop={(e) => {\n                      e.preventDefault();\n                      const productId = parseInt(\n                        e.dataTransfer.getData(\"text/plain\")\n                      );\n                      if (productId && !isNaN(productId)) {\n                        moveProductToPage(productId, pageNumber);\n                        setDropTargetPage(null);\n                      }\n                    }}\n                  >\n                    {/* Fixed: Supermarket-style template background layers */}\n                    {showSupermarketTemplate && (\n                      <>\n                        {/* Header strip */}\n                        <div\n                          className=\"absolute left-0 top-0 w-full\"\n                          style={{\n                            height: 120,\n                            background: HEADER_BG_COLOR,\n                            opacity: HEADER_BG_OPACITY,\n                            borderTopLeftRadius: \"20px\",\n                            borderTopRightRadius: \"20px\",\n                          }}\n                        />\n                        {/* Banner strip */}\n                        <div\n                          className=\"absolute left-0\"\n                          style={{\n                            top: 120,\n                            height: 44,\n                            width: \"100%\",\n                            background: bannerBgColor,\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\",\n                          }}\n                        >\n                          <span\n                            className=\"font-black tracking-wide\"\n                            style={{ color: bannerTextColor }}\n                          >\n                            {bannerText}\n                          </span>\n                          {/* Header right: phone area */}\n                          <div className=\"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-white/20 px-2 py-1 rounded\">\n                            <Phone className=\"w-4 h-4 text-white\" />\n                            <span className=\"text-xs text-white whitespace-nowrap\">\n                              {headerPhoneText}\n                            </span>\n                            <span className=\"text-sm font-bold text-white whitespace-nowrap\">\n                              {headerPhoneNumber}\n                            </span>\n                          </div>\n                        </div>\n                        {/* Footer strip */}\n                        <div\n                          className=\"absolute left-0 bottom-0 w-full\"\n                          style={{\n                            height: 80,\n                            background: footerBgColor,\n                            borderBottomLeftRadius: \"20px\",\n                            borderBottomRightRadius: \"20px\",\n                          }}\n                        />\n                        {/* Footer content: address left, socials right */}\n                        <div className=\"absolute left-0 bottom-0 w-full h-20 flex items-center justify-between px-4\">\n                          <div className=\"text-xs text-white max-w-[60%]\">\n                            {footerAddress}\n                          </div>\n                          <div className=\"flex items-center gap-3 text-white\">\n                            <div className=\"flex items-center gap-1\">\n                              <Instagram className=\"w-4 h-4\" />\n                              <span className=\"text-xs\">{socialInstagram}</span>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Facebook className=\"w-4 h-4\" />\n                              <span className=\"text-xs\">{socialFacebook}</span>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Twitter className=\"w-4 h-4\" />\n                              <span className=\"text-xs\">{socialTwitter}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </>\n                    )}\n\n                    {/* FIXED: Interactive Company Logo - Only show if not explicitly removed */}\n                    {selectedLogoId !== -1 && (\n                      <div\n                        className=\"absolute draggable-element cursor-move user-select-none z-40 group\"\n                        style={{\n                          left: elementPositions.logo.x,\n                          top: elementPositions.logo.y,\n                        }}\n                        onMouseDown={(e) => {\n                          handleMouseDown(\"logo\", e);\n                        }}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setIsLogoSelected(true);\n                          setSelectedProductIdForControls(null);\n                        }}\n                      >\n                        <div\n                          className=\"bg-white rounded-lg flex items-center justify-center shadow-lg overflow-hidden relative\"\n                          style={{\n                            width: `${64 * logoScale}px`,\n                            height: `${64 * logoScale}px`,\n                            transform: `rotate(${logoRotation}deg)`,\n                          }}\n                        >\n                          {selectedLogo ? (\n                            <>\n                              <img\n                                src={\n                                  selectedLogo.filePath\n                                    ? selectedLogo.filePath.startsWith(\n                                        \"/public/assets/\"\n                                      ) ||\n                                      selectedLogo.filePath.startsWith(\n                                        \"public/assets/\"\n                                      )\n                                      ? selectedLogo.filePath.startsWith(\"/\")\n                                        ? selectedLogo.filePath\n                                        : `/${selectedLogo.filePath}`\n                                      : `/uploads/${selectedLogo.filePath}`\n                                    : \"\"\n                                }\n                                alt=\"Company Logo\"\n                                className=\"w-full h-full object-contain rounded-lg\"\n                                onError={(e) => {\n                                  (e.target as HTMLImageElement).style.display =\n                                    \"none\";\n                                  (\n                                    e.target as HTMLImageElement\n                                  ).nextElementSibling?.removeAttribute(\n                                    \"style\"\n                                  );\n                                }}\n                              />\n                              {/* Remove logo button */}\n                              <button\n                                className=\"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setIsLogoSelectOpen(true); // Open selection dialog instead of just removing\n                                }}\n                                data-edit-control=\"true\"\n                              >\n                                ×\n                              </button>\n                              {/* Logo controls overlay removed; use Transform panel instead */}\n                            </>\n                          ) : (\n                            <div\n                              className=\"w-full h-full flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors\"\n                              onClick={() => {\n                                setIsLogoSelectOpen(true);\n                                setIsLogoSelected(true);\n                              }}\n                            >\n                              <Building className=\"w-8 h-8 text-gray-400\" />\n                              <div className=\"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 bg-black bg-opacity-50 rounded-lg transition-opacity\">\n                                <span className=\"text-white text-xs\">\n                                  Click to add logo\n                                </span>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Company Name */}\n                    {showCompanyName && (\n                      <div\n                        className=\"absolute draggable-element cursor-move user-select-none z-30\"\n                        style={{\n                          left: elementPositions.companyName.x,\n                          top: elementPositions.companyName.y,\n                        }}\n                        onMouseDown={(e) => handleMouseDown(\"companyName\", e)}\n                        onDoubleClick={(e) => {\n                          e.stopPropagation();\n                          setIsEditingCompanyName(true);\n                        }}\n                      >\n                        {isEditingCompanyName ? (\n                          <input\n                            value={companyName}\n                            onChange={(e) => setCompanyName(e.target.value)}\n                            onBlur={() => setIsEditingCompanyName(false)}\n                            autoFocus\n                            className=\"px-2 py-1 rounded-md border border-gray-300 bg-white/90 font-black text-3xl\"\n                            style={{ color: titleColor, fontFamily: titleFont }}\n                          />\n                        ) : (\n                          <h1\n                            className=\"supermarket-title text-3xl font-black drop-shadow-lg\"\n                            style={{ color: titleColor, fontFamily: titleFont }}\n                          >\n                            {companyName}\n                          </h1>\n                        )}\n                      </div>\n                    )}\n\n                    {/* FIXED: Draggable Date Display on each page */}\n                    {startDate && endDate && (\n                      <div\n                        className=\"absolute cursor-move user-select-none z-20 bg-white/90 px-3 py-1 rounded-md shadow-md text-sm font-medium text-gray-800 border border-gray-200\"\n                        style={{\n                          left: datePositions[pageNumber]?.x || 320,\n                          top: datePositions[pageNumber]?.y || 20,\n                        }}\n                        onMouseDown={(e) => {\n                          setIsDraggingDate(pageNumber);\n                          const rect = e.currentTarget.getBoundingClientRect();\n                          setDateDragStart({\n                            x: e.clientX - rect.left,\n                            y: e.clientY - rect.top,\n                          });\n                          e.preventDefault();\n                        }}\n                        data-edit-control=\"true\"\n                      >\n                        <CalendarIcon className=\"inline w-3 h-3 mr-1\" />\n                        {format(startDate, \"MMM dd\")} -{\" \"}\n                        {format(endDate, \"MMM dd, yyyy\")}\n                      </div>\n                    )}\n\n                    {/* Drop zone message when no products */}\n                    {selectedProducts.length === 0 && (\n                      <div className=\"absolute inset-0 flex items-center justify-center\">\n                        <div className=\"bg-black bg-opacity-50 rounded-lg p-6 text-center\">\n                          <p className=\"text-white font-semibold text-lg\">\n                            No products added yet\n                          </p>\n                          <p className=\"text-sm text-gray-200 mt-2\">\n                            Add products from the left panel and drag them to\n                            position them on your brochure\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Draggable Products - Adaptive grid up to 9 per page (3x3 max) */}\n                    {pageProducts.map((item) => {\n                      const canvasDims = getCanvasDimensions();\n                      const grid = getAdaptiveGridGeometry(\n                        canvasDims.width,\n                        canvasDims.height,\n                        pageProducts.length\n                      );\n                      const fallbackIndex = 0;\n                      const cellIndex =\n                        productGridIndex[item.id] !== undefined\n                          ? productGridIndex[item.id]\n                          : fallbackIndex;\n                      const position =\n                        grid.cells[cellIndex] || grid.cells[fallbackIndex];\n                      const rotation = productRotations[item.id] || 0;\n                      const scale = productScales[item.id] || {\n                        scaleX: DEFAULT_PRODUCT_SCALE,\n                        scaleY: DEFAULT_PRODUCT_SCALE,\n                      };\n                      const isDragging = draggedProductId === item.id;\n                      const isRotating = rotatingProductId === item.id;\n                      const isResizing = resizingProductId === item.id;\n\n                      return (\n                        <div\n                          key={item.id}\n                          className={cn(\n                            \"absolute select-none\",\n                            isDragging\n                              ? \"z-50\"\n                              : isRotating || isResizing\n                              ? \"z-40\"\n                              : \"z-30\"\n                          )}\n                          style={{\n                            left: position.x,\n                            top: position.y,\n                            filter: isDragging\n                              ? \"drop-shadow(0 8px 16px rgba(0,0,0,0.25))\"\n                              : \"drop-shadow(0 2px 4px rgba(0,0,0,0.1))\",\n                            transform: `scale(${isDragging ? 1.02 : 1})`,\n                            transition:\n                              isDragging || isRotating || isResizing\n                                ? \"none\"\n                                : \"all 0.1s ease\",\n                          }}\n                        >\n                          {/* Control buttons removed per new sidebar controls */}\n\n                          {/* Drag Handle for Moving Between Pages - Always show for page-to-page movement */}\n                          <div\n                            draggable\n                            onDragStart={(e) => {\n                              e.dataTransfer.setData(\n                                \"text/plain\",\n                                item.id.toString()\n                              );\n                              e.dataTransfer.effectAllowed = \"move\";\n                            }}\n                            className=\"absolute -top-4 -left-4 bg-orange-500 hover:bg-orange-600 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg transition-colors cursor-grab active:cursor-grabbing z-30\"\n                            title=\"Drag to move to another page\"\n                            style={{\n                              display:\n                                selectedProductIdForControls === item.id\n                                  ? \"flex\"\n                                  : \"none\",\n                            }}\n                          >\n                            📄\n                          </div>\n\n                          {/* Product + Price Container - Single grouped layout */}\n                          <div\n                            className=\"relative inline-block\"\n                            style={{\n                              width: `${grid.cells[cellIndex].width}px`,\n                              height: `${grid.cells[cellIndex].height}px`,\n                            }}\n                          >\n                            {/* Fixed panel background inside, leaves a thin margin so price can hang past it */}\n                            {/* ürün kartı */}\n                            <div className=\"absolute inset-1 rounded-md  \" />\n                            {/* Pure Product Image - Clean container */}\n                            <div\n                              className=\"relative flex items-center justify-center\"\n                              style={{\n                                width: `${grid.cells[cellIndex].innerWidth}px`,\n                                height: `${grid.cells[cellIndex].innerHeight}px`,\n                                transform: `rotate(${rotation}deg) scaleX(${scale.scaleX}) scaleY(${scale.scaleY})`,\n                                transition:\n                                  isRotating || isResizing\n                                    ? \"none\"\n                                    : \"transform 0.1s ease\",\n                              }}\n                              onMouseDown={(e) => {\n                                handleProductMouseDown(item.id, e);\n                              }}\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setSelectedProductIdForControls(item.id);\n                                setIsLogoSelected(false);\n                              }}\n                            >\n                              {item.product.imageUrl ? (\n                                <img\n                                  src={item.product.imageUrl}\n                                  alt={item.product.name}\n                                  className=\"w-full h-full object-contain p-2\"\n                                  style={{\n                                    background: \"transparent\",\n                                    filter:\n                                      \"drop-shadow(0 4px 12px rgba(0,0,0,0.05))\",\n                                  }}\n                                  draggable={false}\n                                />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center\">\n                                  <span className=\"text-gray-600 text-sm font-medium bg-yellow-100/90 px-3 py-2 rounded-lg shadow-sm\">\n                                    No Image\n                                  </span>\n                                </div>\n                              )}\n                            </div>\n\n                            {/* Fixed Grid Layout: Product Name + Price + Discount Badge at Bottom */}\n                            {(() => {\n                              const productCount = pageProducts.length;\n                              const nameSizeClass =\n                                productCount === 1\n                                  ? \"text-xs\"\n                                  : productCount <= 3\n                                  ? \"text-[11px]\"\n                                  : productCount <= 6\n                                  ? \"text-[10px]\"\n                                  : \"text-[9px]\";\n                              const priceSizeClass =\n                                productCount === 1\n                                  ? \"text-[2.25rem]\"\n                                  : productCount <= 3\n                                  ? \"text-2xl\"\n                                  : productCount <= 6\n                                  ? \"text-xl\"\n                                  : \"text-lg\";\n                              const oldPriceSizeClass =\n                                productCount === 1\n                                  ? \"text-[0.82rem]\"\n                                  : productCount <= 3\n                                  ? \"text-xs\"\n                                  : \"text-[10px]\";\n                              const badgeSize =\n                                productCount === 1\n                                  ? \"h-9 w-12\"\n                                  : productCount <= 3\n                                  ? \"h-8 w-11\"\n                                  : productCount <= 6\n                                  ? \"h-7 w-10\"\n                                  : \"h-6 w-9\";\n                              const badgeTextSize =\n                                productCount === 1\n                                  ? \"text-[1.05rem]\"\n                                  : productCount <= 3\n                                  ? \"text-base\"\n                                  : productCount <= 6\n                                  ? \"text-sm\"\n                                  : \"text-xs\";\n                              const pricePadding =\n                                productCount === 1\n                                  ? \"px-2.5 pt-1.5 pb-2\"\n                                  : productCount <= 3\n                                  ? \"px-2 pt-1 pb-1.5\"\n                                  : \"px-2 pt-1 pb-1\";\n\n                              return (\n                                <div className=\"absolute bottom-0 left-0 right-0 px-1 pb-1\">\n                                  {/* Grid container for name and price */}\n                                  <div className=\"flex items-end justify-between gap-2\">\n                                    {/* Left column: Product Name - moved to right */}\n                                    <div className=\"flex items-end justify-end flex-1\">\n                                      <h3\n                                        className={`${nameSizeClass} font-bold text-gray-900 leading-tight line-clamp-2 text-right`}\n                                      >\n                                        {(item as any).displayName ??\n                                          item.product.name}\n                                      </h3>\n                                    </div>\n\n                                    {/* Right column: Price + Discount Badge */}\n                                    <div className=\"relative inline-flex shrink-0\">\n                                      {/* Discount badge - tangent to top-right of price box */}\n                                      {item.discountPercent > 0 && (\n                                        <div\n                                          className={`${badgeSize} ${badgeTextSize} bg-gradient-to-b from-[#ffe800] to-[#ffb100] text-[#d71920] flex items-center justify-center font-black shadow-[0_2px_0_rgba(0,0,0,0.25)] border-2 border-[#d71920] absolute z-10`}\n                                          style={{\n                                            top: \"-20px\",\n                                            right: \"-6px\",\n                                            fontFamily:\n                                              \"'Yu Gothic', 'Meiryo', 'MS Gothic', sans-serif\",\n                                            fontWeight: 900,\n                                            lineHeight: 1,\n                                            letterSpacing: \"-0.02em\",\n                                          }}\n                                        >\n                                          %{item.discountPercent}\n                                        </div>\n                                      )}\n\n                                      {/* Price Box with Old Price (top) and New Price (bottom) */}\n                                      <div\n                                        className={`${pricePadding} bg-gradient-to-b from-[#ef202a] to-[#c21117] outline outline-[3px] outline-[#ffd200] shadow-[0_4px_0_rgba(0,0,0,0.25)] flex flex-col gap-1`}\n                                      >\n                                        {/* Old Price inside red box at top */}\n                                        {item.discountPercent > 0 && (\n                                          <div\n                                            className={`${oldPriceSizeClass} font-semibold text-white line-through decoration-[3px] decoration-[#ffd200] leading-none tracking-tight`}\n                                            style={{\n                                              fontFamily:\n                                                \"'Yu Gothic', 'Meiryo', 'MS Gothic', sans-serif\",\n                                              fontWeight: 600,\n                                            }}\n                                          >\n                                            {(\n                                              (item as any)\n                                                .originalPriceOverride ??\n                                              item.product.originalPrice\n                                            ).toFixed(2)}{\" \"}\n                                            TL\n                                          </div>\n                                        )}\n\n                                        {/* New Price at bottom */}\n                                        <div className=\"flex items-baseline gap-[2px] whitespace-nowrap\">\n                                          <span\n                                            className=\"text-[#ffe600] text-[1.1rem] font-black\"\n                                            style={{\n                                              transform: \"translateY(2px)\",\n                                              filter:\n                                                \"drop-shadow(0 2px 0 rgba(0,0,0,0.3))\",\n                                            }}\n                                          >\n                                            ₺\n                                          </span>\n                                          <span\n                                            className={`text-[#ffe600] ${priceSizeClass} font-black tracking-[-0.04em] leading-none`}\n                                            style={{\n                                              filter:\n                                                \"drop-shadow(0 2px 0 rgba(0,0,0,0.3))\",\n                                              fontFamily:\n                                                \"'Yu Gothic', 'Meiryo', 'MS Gothic', sans-serif\",\n                                              fontWeight: 900,\n                                            }}\n                                          >\n                                            {item.newPrice.toFixed(0)}\n                                            <span\n                                              className=\"text-[0.7em]\"\n                                              style={{\n                                                transform: \"translateY(2px)\",\n                                                display: \"inline-block\",\n                                              }}\n                                            >\n                                              {(item.newPrice % 1)\n                                                .toFixed(2)\n                                                .substring(1)}\n                                            </span>\n                                          </span>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              );\n                            })()}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Right Sidebar Controls (Design Mode) */}\n          {isDesignMode && (\n            <div className=\"w-64 shrink-0\">\n              <div className=\"sticky top-4 border rounded-lg p-4 bg-white shadow-sm\">\n                <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\n                  Transform\n                </h4>\n                {isLogoSelected || selectedProductIdForControls ? (\n                  <>\n                    <div className=\"mb-4\">\n                      <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                        Rotation (deg)\n                      </label>\n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"range\"\n                          min={-180}\n                          max={180}\n                          step={1}\n                          className=\"flex-1\"\n                          value={\n                            isLogoSelected\n                              ? logoRotation || 0\n                              : productRotations[\n                                  selectedProductIdForControls || 0\n                                ] || 0\n                          }\n                          onChange={(e) => {\n                            const val = parseInt(e.target.value);\n                            if (isLogoSelected) {\n                              setLogoRotation(val);\n                            } else {\n                              if (selectedProductIdForControls != null) {\n                                setProductRotations((prev) => ({\n                                  ...prev,\n                                  [selectedProductIdForControls]: val,\n                                }));\n                              }\n                            }\n                          }}\n                        />\n                        <input\n                          type=\"number\"\n                          className=\"w-16 border rounded px-1 py-1 text-sm\"\n                          value={\n                            isLogoSelected\n                              ? logoRotation || 0\n                              : productRotations[\n                                  selectedProductIdForControls || 0\n                                ] || 0\n                          }\n                          onChange={(e) => {\n                            const val = parseInt(e.target.value || \"0\");\n                            if (isLogoSelected) {\n                              setLogoRotation(val);\n                            } else {\n                              if (selectedProductIdForControls != null) {\n                                setProductRotations((prev) => ({\n                                  ...prev,\n                                  [selectedProductIdForControls]: val,\n                                }));\n                              }\n                            }\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                        Scale\n                      </label>\n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"range\"\n                          min={0.2}\n                          max={2}\n                          step={0.01}\n                          className=\"flex-1\"\n                          value={\n                            isLogoSelected\n                              ? logoScale || 1\n                              : productScales[selectedProductIdForControls || 0]\n                                  ?.scaleX || DEFAULT_PRODUCT_SCALE\n                          }\n                          onChange={(e) => {\n                            const val = parseFloat(e.target.value);\n                            if (isLogoSelected) {\n                              setLogoScale(val);\n                            } else {\n                              if (selectedProductIdForControls != null) {\n                                setProductScales((prev) => ({\n                                  ...prev,\n                                  [selectedProductIdForControls]: {\n                                    scaleX: val,\n                                    scaleY: val,\n                                  },\n                                }));\n                              }\n                            }\n                          }}\n                        />\n                        <input\n                          type=\"number\"\n                          className=\"w-16 border rounded px-1 py-1 text-sm\"\n                          step={0.01}\n                          min={0.2}\n                          max={2}\n                          value={\n                            isLogoSelected\n                              ? logoScale || 1\n                              : productScales[selectedProductIdForControls || 0]\n                                  ?.scaleX || DEFAULT_PRODUCT_SCALE\n                          }\n                          onChange={(e) => {\n                            const val = parseFloat(e.target.value || \"1\");\n                            if (isLogoSelected) {\n                              setLogoScale(val);\n                            } else {\n                              if (selectedProductIdForControls != null) {\n                                setProductScales((prev) => ({\n                                  ...prev,\n                                  [selectedProductIdForControls]: {\n                                    scaleX: val,\n                                    scaleY: val,\n                                  },\n                                }));\n                              }\n                            }\n                          }}\n                        />\n                      </div>\n                    </div>\n                  </>\n                ) : (\n                  <p className=\"text-sm text-gray-500\">\n                    Select a product to edit rotation and scale.\n                  </p>\n                )}\n              </div>\n              <hr className=\"my-4\" />\n              <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\n                Styles\n              </h4>\n              <div className=\"space-y-4\">\n                {/* Typography */}\n                <div className=\"border rounded-lg p-3\">\n                  <h5 className=\"text-xs font-semibold text-gray-700 mb-2\">\n                    Typography\n                  </h5>\n                  <div className=\"grid grid-cols-1 gap-3\">\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                        Title Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={titleColor}\n                        onChange={(e) => setTitleColor(e.target.value)}\n                        className=\"h-9 w-16 p-1 border rounded\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-2\">\n                        Title Font\n                      </label>\n                      <Select value={titleFont} onValueChange={setTitleFont}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"'Bebas Neue', 'Montserrat', 'Arial Black', sans-serif\">\n                            Bebas Neue\n                          </SelectItem>\n                          <SelectItem value=\"'Anton', 'Impact', 'Arial Black', sans-serif\">\n                            Anton\n                          </SelectItem>\n                          <SelectItem value=\"'Playfair Display', 'Times New Roman', 'Georgia', serif\">\n                            Playfair Display\n                          </SelectItem>\n                          <SelectItem value=\"'Abril Fatface', 'Times New Roman', serif\">\n                            Abril Fatface\n                          </SelectItem>\n                          <SelectItem value=\"'Raleway', 'Helvetica Neue', 'Arial', sans-serif\">\n                            Raleway\n                          </SelectItem>\n                          <SelectItem value=\"'Oswald', 'Arial Narrow', 'Helvetica', sans-serif\">\n                            Oswald\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                </div>\n                {/* Colors */}\n                <div className=\"border rounded-lg p-3\">\n                  <h5 className=\"text-xs font-semibold text-gray-700 mb-2\">\n                    Colors\n                  </h5>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                        Banner Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={bannerBgColor}\n                        onChange={(e) => setBannerBgColor(e.target.value)}\n                        className=\"h-9 w-16 p-1 border rounded\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                        Banner Text Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={bannerTextColor}\n                        onChange={(e) => setBannerTextColor(e.target.value)}\n                        className=\"h-9 w-16 p-1 border rounded\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                        Footer Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={footerBgColor}\n                        onChange={(e) => setFooterBgColor(e.target.value)}\n                        className=\"h-9 w-16 p-1 border rounded\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Campaign Creation Dialog */}\n      <Dialog\n        open={isCreateCampaignOpen}\n        onOpenChange={setIsCreateCampaignOpen}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Create Campaign</DialogTitle>\n            <DialogDescription>\n              Enter a name and description for your campaign ({pages} page\n              {pages > 1 ? \"s\" : \"\"})\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Campaign Name *\n              </label>\n              <Input\n                value={campaignName}\n                onChange={(e) => setCampaignName(e.target.value)}\n                placeholder=\"Enter campaign name\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Description (Optional)\n              </label>\n              <Input\n                value={campaignDescription}\n                onChange={(e) => setCampaignDescription(e.target.value)}\n                placeholder=\"Enter campaign description\"\n              />\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              This campaign will include {selectedProducts.length} product\n              {selectedProducts.length > 1 ? \"s\" : \"\"} distributed across{\" \"}\n              {pages} page{pages > 1 ? \"s\" : \"\"}.\n            </div>\n            <div className=\"flex justify-end space-x-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setIsCreateCampaignOpen(false)}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSaveCampaign}\n                disabled={!campaignName.trim()}\n              >\n                Create Campaign\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Download Dialog */}\n      <Dialog open={isDownloadOpen} onOpenChange={setIsDownloadOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Download Brochure</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Choose your preferred download format:\n            </p>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <Button variant=\"outline\" onClick={() => handleDownload(\"pdf\")}>\n                <FileText className=\"w-4 h-4 mr-2\" />\n                PDF\n              </Button>\n              <Button variant=\"outline\" onClick={() => handleDownload(\"png\")}>\n                <Image className=\"w-4 h-4 mr-2\" />\n                PNG\n              </Button>\n              <Button variant=\"outline\" onClick={() => handleDownload(\"jpeg\")}>\n                <Image className=\"w-4 h-4 mr-2\" />\n                JPEG\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Logo Selection Dialog */}\n      <Dialog open={isLogoSelectOpen} onOpenChange={setIsLogoSelectOpen}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Select Logo</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            {/* Upload new logo option */}\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors\">\n              <button\n                onClick={() =>\n                  document.getElementById(\"logo-upload-input\")?.click()\n                }\n                className=\"w-full text-gray-600 hover:text-gray-800\"\n              >\n                <Upload className=\"w-8 h-8 mx-auto mb-2\" />\n                <p className=\"text-sm font-medium\">Upload New Logo</p>\n              </button>\n            </div>\n\n            {/* Existing logos grid */}\n            {logos && logos.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">\n                  Choose from existing logos:\n                </h4>\n                <div className=\"grid grid-cols-3 gap-3\">\n                  {logos.map((logo) => (\n                    <button\n                      key={logo.id}\n                      onClick={() => {\n                        setSelectedLogoId(logo.id);\n                        setIsLogoSelectOpen(false);\n                      }}\n                      className=\"aspect-square border rounded-lg p-2 hover:border-blue-500 transition-colors\"\n                    >\n                      <img\n                        src={\n                          logo.filePath\n                            ? logo.filePath.startsWith(\"/public/assets/\") ||\n                              logo.filePath.startsWith(\"public/assets/\")\n                              ? logo.filePath.startsWith(\"/\")\n                                ? logo.filePath\n                                : `/${logo.filePath}`\n                              : `/uploads/${logo.filePath}`\n                            : \"\"\n                        }\n                        alt={logo.name}\n                        className=\"w-full h-full object-contain\"\n                      />\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Remove logo option */}\n            <div className=\"pt-2 border-t\">\n              <button\n                onClick={() => {\n                  setSelectedLogoId(-1); // Use -1 to indicate completely removed\n                  setIsLogoSelectOpen(false);\n                }}\n                className=\"w-full text-left text-red-600 hover:text-red-800 text-sm\"\n              >\n                Remove logo area entirely\n              </button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Hidden logo upload input */}\n      <input\n        id=\"logo-upload-input\"\n        type=\"file\"\n        accept=\"image/*\"\n        style={{ display: \"none\" }}\n        onChange={async (e) => {\n          const file = e.target.files?.[0];\n          if (!file || !user?.id) return;\n\n          const formData = new FormData();\n          formData.append(\"file\", file); // FIXED: Use 'file' field name to match server\n          formData.append(\"name\", file.name);\n          formData.append(\"userId\", user.id.toString());\n\n          try {\n            const response = await fetch(\"/api/logos\", {\n              method: \"POST\",\n              body: formData,\n            });\n\n            if (response.ok) {\n              const newLogo = await response.json();\n              setSelectedLogoId(newLogo.id);\n              setIsLogoSelectOpen(false);\n              queryClient.invalidateQueries({ queryKey: [\"/api/logos\"] });\n              toast({\n                title: \"Logo uploaded successfully\",\n                description: \"Your logo has been added to the brochure.\",\n              });\n            }\n          } catch (error) {\n            toast({\n              title: \"Upload failed\",\n              description: \"Could not upload logo. Please try again.\",\n              variant: \"destructive\",\n            });\n          }\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":105023},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711}},"version":2}